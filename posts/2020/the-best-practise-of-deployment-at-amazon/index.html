<!doctype html><html lang=en-us><head><title>亚马逊的部署最佳实践</title><style>body,body.pushable{background-repeat:no-repeat;background-attachment:fixed;background-size:cover!important}</style><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=author content="Kane"><meta name=description content="亚马逊如何做持续部署"><meta name=generator content="Hugo 0.78.1"><link rel="shortcut icon" href=/img/favicon.ico><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css><script src=https://code.jquery.com/jquery-3.3.1.min.js integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.js></script><link href="https://fonts.googleapis.com/css?family=Abril+Fatface|Inconsolata" rel=stylesheet><link rel=stylesheet type=text/css href=/css/site.css><link rel=stylesheet type=text/css href=/css/highlight.css><link rel=stylesheet type=text/css href=/css/highlight.css><style>body.pushable{display:block;background-image:var(--bgImage)!important}</style><script>var isMobile=(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent))
console.log("The client device is a "+(isMobile?"mobile":"PC")+".")</script></head><body><script>var prevBgIndex=0;var bodyBgSwitchIndex=0;var gradients=[[],['#40e0d0','#ff8c00','#ff0080'],['#3e5151','#decba4'],['#11998e','#38ef7d'],['#108dc7','#ef8e38'],['#fc5c7d','#6a82fb'],['#fc466b','#3f5efb'],['#c94b4b','#4b134f'],['#23074d','#cc5333']];var randomBgColor=gradients[getRandomInt(0,gradients.length)].join(", ");var backgroundProperty='linear-gradient(to right, '+randomBgColor+')';document.body.style.background=backgroundProperty;function getRandomInt(min,max){min=Math.ceil(min);max=Math.floor(max);var random;while(1){random=Math.floor(Math.random()*(max-min))+min;if(random!==prevBgIndex){prevBgIndex=random;break;}}
return random;}</script><div id=sidebar class="ui sidebar inverted vertical menu"><section id=author class="ui top attached center aligned inverted segment"><div class="ui small circular image"><img src=/img/portrait.jpg></div><h3 class="ui header">Kane<div class="sub header">Three boys' father, open source mania.</div></h3></section><section class="ui attached center aligned inverted segment sidebar-dream-tags"><a class="ui label brown" href=/tags/aws title=aws>aws</a>
<a class="ui label teal" href=/tags/eclipse title=eclipse>eclipse</a>
<a class="ui label orange" href=/tags/%E4%BA%91%E8%AE%A1%E7%AE%97 title=云计算>云计算</a>
<a class="ui label pink" href=/tags/equinox title=equinox>equinox</a>
<a class="ui label brown" href=/tags/tip title=tip>tip</a>
<a class="ui label pink" href=/tags/osgi title=osgi>osgi</a>
<a class="ui label orange" href=/tags/p2 title=p2>p2</a>
<a class="ui label teal" href=/tags/%E9%98%BF%E9%87%8C%E4%BA%91 title=阿里云>阿里云</a>
<a class="ui label teal" href=/tags/docker title=docker>docker</a>
<a class="ui label violet" href=/tags/faas title=faas>faas</a></section><section class="ui attached inverted segment sidebar-dream-categories both flexbox"><div class="ui inverted accordion"><div class=title><i class="dropdown icon"></i><a class=link href=/categories/amazon-builders-library>amazon-builders-library</a></div><div class=content><a class=item href=https://kane.mx/posts/2020/the-best-practise-of-deployment-at-amazon/><div><i class="cocktail icon"></i><p>亚马逊的部署最佳实践</p></div></a></div><div class=title><i class="dropdown icon"></i><a class=link href=/categories/blogging>blogging</a></div><div class=content><a class=item href=https://kane.mx/posts/2020/the-best-practise-of-deployment-at-amazon/><div><i class="cocktail icon"></i><p>亚马逊的部署最佳实践</p></div></a><a class=item href=https://kane.mx/posts/2020/deploy-aws-cdk-applications-cross-accounts/><div><i class="cocktail icon"></i><p>跨账号跨区域部署AWS CDK编排的应用</p></div></a><a class=item href=https://kane.mx/posts/2020/deploy-sonatype-nexus-oss-on-eks/><div><i class="cocktail icon"></i><p>Deploy Sonatype Nexus repository OSS on EKS</p></div></a><a class=item href=https://kane.mx/posts/2020/serverless-docker-images-analytics/><div><i class="cocktail icon"></i><p>无服务器架构的Docker镜像数据分析应用</p></div></a><a class=item href=https://kane.mx/posts/2020/get-docker-image-size-without-pulling-image/><div><i class="cocktail icon"></i><p>Get the size of Docker image without pulling image</p></div></a><a class=item href=https://kane.mx/posts/2020/zsh-performance-tuning/><div><i class="cocktail icon"></i><p>oh-my-zsh性能调优思路</p></div></a><a class=item href=https://kane.mx/posts/2020/codecommit-devops-model/><div><i class="cocktail icon"></i><p>基于CodeCommit代码管理的无服务器架构Devops</p></div></a><a class=item href=https://kane.mx/posts/2020/new-http-apis-of-api-gateway/><div><i class="cocktail icon"></i><p>AWS发布更快、更便宜、更易用的HTTP APIs</p></div></a><a class=item href=https://kane.mx/posts/2019/aws-cloud-debugging/><div><i class="cocktail icon"></i><p>AWS Cloud Debugging初探</p></div></a><a class=item href=https://kane.mx/posts/2019/aws-batch/><div><i class="cocktail icon"></i><p>AWS Batch简介</p></div></a><a class=item href=https://kane.mx/posts/2019/email-forwarding/><div><i class="cocktail icon"></i><p>免费邮件转发服务</p></div></a><a class=item href=https://kane.mx/posts/2019/aliyun-edas-migration-in-action/><div><i class="cocktail icon"></i><p>实战Aliyun EDAS应用迁移AWS</p></div></a><a class=item href=https://kane.mx/posts/2019/rds-log-analysis/><div><i class="cocktail icon"></i><p>AWS RDS数据库日志分析及展示</p></div></a><a class=item href=https://kane.mx/posts/2019/using-openswan-connect-aws-vpn/><div><i class="cocktail icon"></i><p>使用Openswan连接AWS VPC</p></div></a><a class=item href=https://kane.mx/posts/2019/aws-cdk/><div><i class="cocktail icon"></i><p>AWS CDK简介</p></div></a><a class=item href=https://kane.mx/posts/2019/alexa-login-issue/><div><i class="cocktail icon"></i><p>Amazon Alexa Android版本国内登录问题</p></div></a><a class=item href=https://kane.mx/posts/2019/using-s3-as-device-for-mac-time-machine-backup/><div><i class="cocktail icon"></i><p>使用AWS S3作为MacOSX时间机器(Time Machine)的备份存储</p></div></a><a class=item href=https://kane.mx/posts/2019/aws-vs-aliyun/><div><i class="cocktail icon"></i><p>公有云对比</p></div></a><a class=item href=https://kane.mx/posts/2019/serverless-framework/><div><i class="cocktail icon"></i><p>Serverless framework 101</p></div></a><a class=item href=https://kane.mx/posts/2019/aws-lambda-layers/><div><i class="cocktail icon"></i><p>AWS Lambda Layer实践</p></div></a><a class=item href=https://kane.mx/posts/2019/2019-qconbeijing-reviews/><div><i class="cocktail icon"></i><p>QCon2019北京站回顾</p></div></a><a class=item href=https://kane.mx/posts/2018/2018-12-13-bj-archsummit-review/><div><i class="cocktail icon"></i><p>2018北京ArchSummit回顾</p></div></a><a class=item href=https://kane.mx/posts/2016/how-to-fix-jenkins-fail-to-load-job-config/><div><i class="cocktail icon"></i><p>如何修复Jenkins CI无法读取存在的任务配置</p></div></a><a class=item href=https://kane.mx/posts/2016/how-to-find-slow-queries-in-mongodb/><div><i class="cocktail icon"></i><p>MongoDB中如何找出慢查询</p></div></a><a class=item href=https://kane.mx/posts/2016/the-limitations-docker-swarm-mode-v1.12/><div><i class="cocktail icon"></i><p>Docker Swarm mode(v1.12.x)的一些使用限制</p></div></a><a class=item href=https://kane.mx/posts/2016/docker-swarm-mode-in-ubuntu-1404/><div><i class="cocktail icon"></i><p>创建于Docker Swarm的服务无法在Ubuntu 14.04 LTS中运行</p></div></a><a class=item href=https://kane.mx/posts/2016/seo-optimization-for-angularajs-based-app/><div><i class="cocktail icon"></i><p>基于Angularjs单页面应用的SEO优化</p></div></a><a class=item href=https://kane.mx/posts/2016/clustered-session-under-spring-framework/><div><i class="cocktail icon"></i><p>Spring框架下的分布式session管理</p></div></a><a class=item href=https://kane.mx/posts/2016/how-we-build-videome/><div><i class="cocktail icon"></i><p>V秘是如何构建的</p></div></a><a class=item href=https://kane.mx/posts/2016/aliyun-ossfs-sucks/><div><i class="cocktail icon"></i><p>说一说阿里云ossfs</p></div></a><a class=item href=https://kane.mx/posts/2016/weixin-temporary-materials/><div><i class="cocktail icon"></i><p>如何使用微信公众平台的临时素材</p></div></a><a class=item href=https://kane.mx/posts/2016/single-page-app-meets-weixin-pay/><div><i class="cocktail icon"></i><p>单页面应用(single page application)中使用微信支付</p></div></a><a class=item href=https://kane.mx/posts/2016/docker-build-no-space-left-caused-by-inode-exhausted/><div><i class="cocktail icon"></i><p>文件系统的Inode耗尽，会导致Docker编译镜像出现'No space left on device'错误</p></div></a></div><div class=title><i class="dropdown icon"></i><a class=link href=/categories/effective-cloud-computing>effective-cloud-computing</a></div><div class=content><a class=item href=https://kane.mx/posts/2020/deploy-aws-cdk-applications-cross-accounts/><div><i class="cocktail icon"></i><p>跨账号跨区域部署AWS CDK编排的应用</p></div></a><a class=item href=https://kane.mx/posts/2020/deploy-sonatype-nexus-oss-on-eks/><div><i class="cocktail icon"></i><p>Deploy Sonatype Nexus repository OSS on EKS</p></div></a><a class=item href=https://kane.mx/posts/2020/serverless-docker-images-analytics/><div><i class="cocktail icon"></i><p>无服务器架构的Docker镜像数据分析应用</p></div></a><a class=item href=https://kane.mx/posts/2020/codecommit-devops-model/><div><i class="cocktail icon"></i><p>基于CodeCommit代码管理的无服务器架构Devops</p></div></a><a class=item href=https://kane.mx/posts/2019/aws-cloud-debugging/><div><i class="cocktail icon"></i><p>AWS Cloud Debugging初探</p></div></a><a class=item href=https://kane.mx/posts/2019/aws-batch/><div><i class="cocktail icon"></i><p>AWS Batch简介</p></div></a><a class=item href=https://kane.mx/posts/2019/aws-cdk/><div><i class="cocktail icon"></i><p>AWS CDK简介</p></div></a><a class=item href=https://kane.mx/posts/effective-cloud-computing/serverless-domain-redirect/><div><i class="cocktail icon"></i><p>无服务器架构的域名重定向服务</p></div></a><a class=item href=https://kane.mx/posts/effective-cloud-computing/spring-cloud-function-for-aws/><div><i class="cocktail icon"></i><p>Spring Cloud Function -- 跨Serverless平台的函数计算框架</p></div></a><a class=item href=https://kane.mx/posts/effective-cloud-computing/spring-cloud-or-cloud-native/><div><i class="cocktail icon"></i><p>Spring Cloud or Cloud Native</p></div></a><a class=item href=https://kane.mx/posts/effective-cloud-computing/oauth2-proxy-on-kubernetes/part2/><div><i class="cocktail icon"></i><p>为Kubernetes中任意应用添加基于oauth2的认证保护 (下)</p></div></a><a class=item href=https://kane.mx/posts/effective-cloud-computing/serverless-dingtalk-callback/><div><i class="cocktail icon"></i><p>基于函数计算的钉钉回调函数接口</p></div></a><a class=item href=https://kane.mx/posts/effective-cloud-computing/serverless-computing-101/><div><i class="cocktail icon"></i><p>无服务器计算101</p></div></a><a class=item href=https://kane.mx/posts/effective-cloud-computing/oauth2-proxy-on-kubernetes/part1/><div><i class="cocktail icon"></i><p>为Kubernetes中任意应用添加基于oauth2的认证保护 (上)</p></div></a><a class=item href=https://kane.mx/posts/effective-cloud-computing/iam-best-practice/><div><i class="cocktail icon"></i><p>IAM最佳实践</p></div></a><a class=item href=https://kane.mx/posts/effective-cloud-computing/using-kubernetes-on-cloud/><div><i class="cocktail icon"></i><p>不要自建Kubernetes</p></div></a><a class=item href=https://kane.mx/posts/effective-cloud-computing/preface/><div><i class="cocktail icon"></i><p>真的会用云服务吗？</p></div></a></div><div class=title><i class="dropdown icon"></i><a class=link href=/categories/kubernetes>kubernetes</a></div><div class=content><a class=item href=https://kane.mx/posts/effective-cloud-computing/spring-cloud-or-cloud-native/><div><i class="cocktail icon"></i><p>Spring Cloud or Cloud Native</p></div></a><a class=item href=https://kane.mx/posts/effective-cloud-computing/oauth2-proxy-on-kubernetes/part2/><div><i class="cocktail icon"></i><p>为Kubernetes中任意应用添加基于oauth2的认证保护 (下)</p></div></a><a class=item href=https://kane.mx/posts/effective-cloud-computing/oauth2-proxy-on-kubernetes/part1/><div><i class="cocktail icon"></i><p>为Kubernetes中任意应用添加基于oauth2的认证保护 (上)</p></div></a><a class=item href=https://kane.mx/posts/effective-cloud-computing/using-kubernetes-on-cloud/><div><i class="cocktail icon"></i><p>不要自建Kubernetes</p></div></a></div><div class=title><i class="dropdown icon"></i><a class=link href=/categories/serverless-computing>serverless-computing</a></div><div class=content><a class=item href=https://kane.mx/posts/2020/new-http-apis-of-api-gateway/><div><i class="cocktail icon"></i><p>AWS发布更快、更便宜、更易用的HTTP APIs</p></div></a><a class=item href=https://kane.mx/posts/effective-cloud-computing/serverless-domain-redirect/><div><i class="cocktail icon"></i><p>无服务器架构的域名重定向服务</p></div></a><a class=item href=https://kane.mx/posts/effective-cloud-computing/spring-cloud-function-for-aws/><div><i class="cocktail icon"></i><p>Spring Cloud Function -- 跨Serverless平台的函数计算框架</p></div></a><a class=item href=https://kane.mx/posts/2019/serverless-framework/><div><i class="cocktail icon"></i><p>Serverless framework 101</p></div></a><a class=item href=https://kane.mx/posts/2019/aws-lambda-layers/><div><i class="cocktail icon"></i><p>AWS Lambda Layer实践</p></div></a><a class=item href=https://kane.mx/posts/effective-cloud-computing/serverless-dingtalk-callback/><div><i class="cocktail icon"></i><p>基于函数计算的钉钉回调函数接口</p></div></a><a class=item href=https://kane.mx/posts/effective-cloud-computing/serverless-computing-101/><div><i class="cocktail icon"></i><p>无服务器计算101</p></div></a></div><div class=title><i class="dropdown icon"></i><a class=link href=/categories/trip>trip</a></div><div class=content><a class=item href=https://kane.mx/posts/archive/blogspot/food-and-drinking/><div><i class="cocktail icon"></i><p>Food and Drinking</p></div></a><a class=item href=https://kane.mx/posts/archive/blogspot/working-workspace/><div><i class="cocktail icon"></i><p>Working Workspace</p></div></a><a class=item href=https://kane.mx/posts/archive/blogspot/transportation/><div><i class="cocktail icon"></i><p>Transportation</p></div></a><a class=item href=https://kane.mx/posts/archive/blogspot/working-style/><div><i class="cocktail icon"></i><p>Working style</p></div></a><a class=item href=https://kane.mx/posts/archive/blogspot/day-1/><div><i class="cocktail icon"></i><p>day 1</p></div></a></div></div></section><section id=footer class="ui bottom attached center aligned inverted segment"><p>© 2020 The Road</p><p>Powered by <a href=https://gohugo.io/ target=_blank>Hugo</a> with <a href=https://github.com/UtkarshVerma/hugo-dream-plus target=_blank>Dream Plus</a> theme.</p></section></div><div class=pusher><div class=flipper><div class=front><nav class="ui top secondary menu bar"><div class=item><i class="inverted big link bullseye icon dream-flip-toggle" title="About Me"></i></div><div class=item><a href=/><i class="inverted big link home icon" title=Home></i></a></div><div class=item><a href=/tags><i class="inverted big link tags icon" title="All Tags"></i></a></div><div class=item><a href=/categories><i class="inverted big link cubes icon" title="All Categories"></i></a></div><div class="ui container tablet computer only grid"><div class=item onclick="$('.ui.sidebar').sidebar('setting','transition','overlay').sidebar('toggle');"><i class="inverted big link sidebar icon" title="Show Sidebar"></i></div></div><div class="item right"><a href=/posts/index.xml><i class="inverted big link rss icon" title="RSS Feed"></i></a></div></nav><div class="ui centered grid"><div class="sixteen wide mobile only column"><div class="ui inverted accordion"><div id=header class="ui inverted segment column box"><header id=author class="ui top attached center aligned inverted segment"><div class="ui small circular image"><img src=/img/portrait.jpg></div><h3 class="ui header">Kane<div class="sub header">Three boys' father, open source mania.</div></h3></header><div class="title header-title"><div id=tag-category-pop class="ui red right corner label"><i class="hand point icon down" title="Show/hide tags and categories"></i></div></div><div id=tag-category class=content><section class="ui attached center aligned inverted segment dream-tags none flexbox"><a class="ui label violet" href=/tags/aws title=aws>aws</a>
<a class="ui label red" href=/tags/eclipse title=eclipse>eclipse</a>
<a class="ui label green" href=/tags/%E4%BA%91%E8%AE%A1%E7%AE%97 title=云计算>云计算</a>
<a class="ui label blue" href=/tags/equinox title=equinox>equinox</a>
<a class="ui label teal" href=/tags/tip title=tip>tip</a>
<a class="ui label orange" href=/tags/osgi title=osgi>osgi</a>
<a class="ui label red" href=/tags/p2 title=p2>p2</a>
<a class="ui label brown" href=/tags/%E9%98%BF%E9%87%8C%E4%BA%91 title=阿里云>阿里云</a>
<a class="ui label green" href=/tags/docker title=docker>docker</a>
<a class="ui label red" href=/tags/faas title=faas>faas</a></section><section class="ui attached inverted segment dream-categories both flexbox"><div class="inverted accordion"><div class=title><i class="dropdown icon"></i><a class=link href=/categories/amazon-builders-library>amazon-builders-library</a></div><div class=content><a class=item href=https://kane.mx/posts/2020/the-best-practise-of-deployment-at-amazon/><div><i class="cocktail icon"></i><p>亚马逊的部署最佳实践</p></div></a></div><div class=title><i class="dropdown icon"></i><a class=link href=/categories/blogging>blogging</a></div><div class=content><a class=item href=https://kane.mx/posts/2020/the-best-practise-of-deployment-at-amazon/><div><i class="cocktail icon"></i><p>亚马逊的部署最佳实践</p></div></a><a class=item href=https://kane.mx/posts/2020/deploy-aws-cdk-applications-cross-accounts/><div><i class="cocktail icon"></i><p>跨账号跨区域部署AWS CDK编排的应用</p></div></a><a class=item href=https://kane.mx/posts/2020/deploy-sonatype-nexus-oss-on-eks/><div><i class="cocktail icon"></i><p>Deploy Sonatype Nexus repository OSS on EKS</p></div></a><a class=item href=https://kane.mx/posts/2020/serverless-docker-images-analytics/><div><i class="cocktail icon"></i><p>无服务器架构的Docker镜像数据分析应用</p></div></a><a class=item href=https://kane.mx/posts/2020/get-docker-image-size-without-pulling-image/><div><i class="cocktail icon"></i><p>Get the size of Docker image without pulling image</p></div></a><a class=item href=https://kane.mx/posts/2020/zsh-performance-tuning/><div><i class="cocktail icon"></i><p>oh-my-zsh性能调优思路</p></div></a><a class=item href=https://kane.mx/posts/2020/codecommit-devops-model/><div><i class="cocktail icon"></i><p>基于CodeCommit代码管理的无服务器架构Devops</p></div></a><a class=item href=https://kane.mx/posts/2020/new-http-apis-of-api-gateway/><div><i class="cocktail icon"></i><p>AWS发布更快、更便宜、更易用的HTTP APIs</p></div></a><a class=item href=https://kane.mx/posts/2019/aws-cloud-debugging/><div><i class="cocktail icon"></i><p>AWS Cloud Debugging初探</p></div></a><a class=item href=https://kane.mx/posts/2019/aws-batch/><div><i class="cocktail icon"></i><p>AWS Batch简介</p></div></a><a class=item href=https://kane.mx/posts/2019/email-forwarding/><div><i class="cocktail icon"></i><p>免费邮件转发服务</p></div></a><a class=item href=https://kane.mx/posts/2019/aliyun-edas-migration-in-action/><div><i class="cocktail icon"></i><p>实战Aliyun EDAS应用迁移AWS</p></div></a><a class=item href=https://kane.mx/posts/2019/rds-log-analysis/><div><i class="cocktail icon"></i><p>AWS RDS数据库日志分析及展示</p></div></a><a class=item href=https://kane.mx/posts/2019/using-openswan-connect-aws-vpn/><div><i class="cocktail icon"></i><p>使用Openswan连接AWS VPC</p></div></a><a class=item href=https://kane.mx/posts/2019/aws-cdk/><div><i class="cocktail icon"></i><p>AWS CDK简介</p></div></a><a class=item href=https://kane.mx/posts/2019/alexa-login-issue/><div><i class="cocktail icon"></i><p>Amazon Alexa Android版本国内登录问题</p></div></a><a class=item href=https://kane.mx/posts/2019/using-s3-as-device-for-mac-time-machine-backup/><div><i class="cocktail icon"></i><p>使用AWS S3作为MacOSX时间机器(Time Machine)的备份存储</p></div></a><a class=item href=https://kane.mx/posts/2019/aws-vs-aliyun/><div><i class="cocktail icon"></i><p>公有云对比</p></div></a><a class=item href=https://kane.mx/posts/2019/serverless-framework/><div><i class="cocktail icon"></i><p>Serverless framework 101</p></div></a><a class=item href=https://kane.mx/posts/2019/aws-lambda-layers/><div><i class="cocktail icon"></i><p>AWS Lambda Layer实践</p></div></a><a class=item href=https://kane.mx/posts/2019/2019-qconbeijing-reviews/><div><i class="cocktail icon"></i><p>QCon2019北京站回顾</p></div></a><a class=item href=https://kane.mx/posts/2018/2018-12-13-bj-archsummit-review/><div><i class="cocktail icon"></i><p>2018北京ArchSummit回顾</p></div></a><a class=item href=https://kane.mx/posts/2016/how-to-fix-jenkins-fail-to-load-job-config/><div><i class="cocktail icon"></i><p>如何修复Jenkins CI无法读取存在的任务配置</p></div></a><a class=item href=https://kane.mx/posts/2016/how-to-find-slow-queries-in-mongodb/><div><i class="cocktail icon"></i><p>MongoDB中如何找出慢查询</p></div></a><a class=item href=https://kane.mx/posts/2016/the-limitations-docker-swarm-mode-v1.12/><div><i class="cocktail icon"></i><p>Docker Swarm mode(v1.12.x)的一些使用限制</p></div></a><a class=item href=https://kane.mx/posts/2016/docker-swarm-mode-in-ubuntu-1404/><div><i class="cocktail icon"></i><p>创建于Docker Swarm的服务无法在Ubuntu 14.04 LTS中运行</p></div></a><a class=item href=https://kane.mx/posts/2016/seo-optimization-for-angularajs-based-app/><div><i class="cocktail icon"></i><p>基于Angularjs单页面应用的SEO优化</p></div></a><a class=item href=https://kane.mx/posts/2016/clustered-session-under-spring-framework/><div><i class="cocktail icon"></i><p>Spring框架下的分布式session管理</p></div></a><a class=item href=https://kane.mx/posts/2016/how-we-build-videome/><div><i class="cocktail icon"></i><p>V秘是如何构建的</p></div></a><a class=item href=https://kane.mx/posts/2016/aliyun-ossfs-sucks/><div><i class="cocktail icon"></i><p>说一说阿里云ossfs</p></div></a><a class=item href=https://kane.mx/posts/2016/weixin-temporary-materials/><div><i class="cocktail icon"></i><p>如何使用微信公众平台的临时素材</p></div></a><a class=item href=https://kane.mx/posts/2016/single-page-app-meets-weixin-pay/><div><i class="cocktail icon"></i><p>单页面应用(single page application)中使用微信支付</p></div></a><a class=item href=https://kane.mx/posts/2016/docker-build-no-space-left-caused-by-inode-exhausted/><div><i class="cocktail icon"></i><p>文件系统的Inode耗尽，会导致Docker编译镜像出现'No space left on device'错误</p></div></a></div><div class=title><i class="dropdown icon"></i><a class=link href=/categories/effective-cloud-computing>effective-cloud-computing</a></div><div class=content><a class=item href=https://kane.mx/posts/2020/deploy-aws-cdk-applications-cross-accounts/><div><i class="cocktail icon"></i><p>跨账号跨区域部署AWS CDK编排的应用</p></div></a><a class=item href=https://kane.mx/posts/2020/deploy-sonatype-nexus-oss-on-eks/><div><i class="cocktail icon"></i><p>Deploy Sonatype Nexus repository OSS on EKS</p></div></a><a class=item href=https://kane.mx/posts/2020/serverless-docker-images-analytics/><div><i class="cocktail icon"></i><p>无服务器架构的Docker镜像数据分析应用</p></div></a><a class=item href=https://kane.mx/posts/2020/codecommit-devops-model/><div><i class="cocktail icon"></i><p>基于CodeCommit代码管理的无服务器架构Devops</p></div></a><a class=item href=https://kane.mx/posts/2019/aws-cloud-debugging/><div><i class="cocktail icon"></i><p>AWS Cloud Debugging初探</p></div></a><a class=item href=https://kane.mx/posts/2019/aws-batch/><div><i class="cocktail icon"></i><p>AWS Batch简介</p></div></a><a class=item href=https://kane.mx/posts/2019/aws-cdk/><div><i class="cocktail icon"></i><p>AWS CDK简介</p></div></a><a class=item href=https://kane.mx/posts/effective-cloud-computing/serverless-domain-redirect/><div><i class="cocktail icon"></i><p>无服务器架构的域名重定向服务</p></div></a><a class=item href=https://kane.mx/posts/effective-cloud-computing/spring-cloud-function-for-aws/><div><i class="cocktail icon"></i><p>Spring Cloud Function -- 跨Serverless平台的函数计算框架</p></div></a><a class=item href=https://kane.mx/posts/effective-cloud-computing/spring-cloud-or-cloud-native/><div><i class="cocktail icon"></i><p>Spring Cloud or Cloud Native</p></div></a><a class=item href=https://kane.mx/posts/effective-cloud-computing/oauth2-proxy-on-kubernetes/part2/><div><i class="cocktail icon"></i><p>为Kubernetes中任意应用添加基于oauth2的认证保护 (下)</p></div></a><a class=item href=https://kane.mx/posts/effective-cloud-computing/serverless-dingtalk-callback/><div><i class="cocktail icon"></i><p>基于函数计算的钉钉回调函数接口</p></div></a><a class=item href=https://kane.mx/posts/effective-cloud-computing/serverless-computing-101/><div><i class="cocktail icon"></i><p>无服务器计算101</p></div></a><a class=item href=https://kane.mx/posts/effective-cloud-computing/oauth2-proxy-on-kubernetes/part1/><div><i class="cocktail icon"></i><p>为Kubernetes中任意应用添加基于oauth2的认证保护 (上)</p></div></a><a class=item href=https://kane.mx/posts/effective-cloud-computing/iam-best-practice/><div><i class="cocktail icon"></i><p>IAM最佳实践</p></div></a><a class=item href=https://kane.mx/posts/effective-cloud-computing/using-kubernetes-on-cloud/><div><i class="cocktail icon"></i><p>不要自建Kubernetes</p></div></a><a class=item href=https://kane.mx/posts/effective-cloud-computing/preface/><div><i class="cocktail icon"></i><p>真的会用云服务吗？</p></div></a></div><div class=title><i class="dropdown icon"></i><a class=link href=/categories/kubernetes>kubernetes</a></div><div class=content><a class=item href=https://kane.mx/posts/effective-cloud-computing/spring-cloud-or-cloud-native/><div><i class="cocktail icon"></i><p>Spring Cloud or Cloud Native</p></div></a><a class=item href=https://kane.mx/posts/effective-cloud-computing/oauth2-proxy-on-kubernetes/part2/><div><i class="cocktail icon"></i><p>为Kubernetes中任意应用添加基于oauth2的认证保护 (下)</p></div></a><a class=item href=https://kane.mx/posts/effective-cloud-computing/oauth2-proxy-on-kubernetes/part1/><div><i class="cocktail icon"></i><p>为Kubernetes中任意应用添加基于oauth2的认证保护 (上)</p></div></a><a class=item href=https://kane.mx/posts/effective-cloud-computing/using-kubernetes-on-cloud/><div><i class="cocktail icon"></i><p>不要自建Kubernetes</p></div></a></div><div class=title><i class="dropdown icon"></i><a class=link href=/categories/serverless-computing>serverless-computing</a></div><div class=content><a class=item href=https://kane.mx/posts/2020/new-http-apis-of-api-gateway/><div><i class="cocktail icon"></i><p>AWS发布更快、更便宜、更易用的HTTP APIs</p></div></a><a class=item href=https://kane.mx/posts/effective-cloud-computing/serverless-domain-redirect/><div><i class="cocktail icon"></i><p>无服务器架构的域名重定向服务</p></div></a><a class=item href=https://kane.mx/posts/effective-cloud-computing/spring-cloud-function-for-aws/><div><i class="cocktail icon"></i><p>Spring Cloud Function -- 跨Serverless平台的函数计算框架</p></div></a><a class=item href=https://kane.mx/posts/2019/serverless-framework/><div><i class="cocktail icon"></i><p>Serverless framework 101</p></div></a><a class=item href=https://kane.mx/posts/2019/aws-lambda-layers/><div><i class="cocktail icon"></i><p>AWS Lambda Layer实践</p></div></a><a class=item href=https://kane.mx/posts/effective-cloud-computing/serverless-dingtalk-callback/><div><i class="cocktail icon"></i><p>基于函数计算的钉钉回调函数接口</p></div></a><a class=item href=https://kane.mx/posts/effective-cloud-computing/serverless-computing-101/><div><i class="cocktail icon"></i><p>无服务器计算101</p></div></a></div><div class=title><i class="dropdown icon"></i><a class=link href=/categories/trip>trip</a></div><div class=content><a class=item href=https://kane.mx/posts/archive/blogspot/food-and-drinking/><div><i class="cocktail icon"></i><p>Food and Drinking</p></div></a><a class=item href=https://kane.mx/posts/archive/blogspot/working-workspace/><div><i class="cocktail icon"></i><p>Working Workspace</p></div></a><a class=item href=https://kane.mx/posts/archive/blogspot/transportation/><div><i class="cocktail icon"></i><p>Transportation</p></div></a><a class=item href=https://kane.mx/posts/archive/blogspot/working-style/><div><i class="cocktail icon"></i><p>Working style</p></div></a><a class=item href=https://kane.mx/posts/archive/blogspot/day-1/><div><i class="cocktail icon"></i><p>day 1</p></div></a></div></div></section></div><footer class="ui bottom attached center aligned inverted segment"><p>© 2020 The Road</p><p>Powered by <a href=https://gohugo.io/ target=_blank>Hugo</a> with <a href=https://github.com/UtkarshVerma/hugo-dream-plus target=_blank>Dream Plus</a> theme.</p></footer></div></div></div><div class="sixteen wide mobile fifteen wide tablet twelve wide computer column post-list"><section class="ui secondary top attached black segment post-head"><h1 class=post-title>亚马逊的部署最佳实践</h1><div class="sub header"><div><span><i class="calendar outline icon"></i>Nov 28, 2020</span></div><div><span><i class="clock outline icon"></i>3 min read</span></div><div><span><i class="angle double up icon"></i>Last updated on Nov 29, 2020</span></div></div><hr><article class="post-content twemoji"><p>近期<a href=https://aws.amazon.com/builders-library/>Amazon Builders Library</a>发布了数篇文章介绍亚马逊如何实践持续部署，同时分享了亚马逊在部署方面的最佳实践。</p><p>这里将这三篇文章核心内容做个概述，方便大家按需细读。</p><h3 id=going-faster-with-continuous-deliverygoing-faster-with-cd><a href="https://aws.amazon.com/builders-library/going-faster-with-continuous-delivery/?did=ba_card&trk=ba_card">Going faster with continuous delivery</a>&nbsp;<a class=anchor href=#going-faster-with-continuous-deliverygoing-faster-with-cd><i class="small linkify icon"></i></a></h3><p>这篇文章先是分享了亚马逊持续改进和软件自动化的文化(Amazonian随时都惦记着的<a href=https://aws.amazon.com/careers/culture/>领导力准则</a>)，然后介绍了亚马逊内部的持续部署工具Pipelines。从一个试点工具进化为亚马逊标准、一致且简洁的发布工具。并且将构建和发布软件的最佳实践检查也融入到Pipelines中。</p><p>接下来是分享如何减小故障影响到客户的风险。有过软件开发经验的都知道，软件变更引入故障是不可避免的，如何将故障对客户的影响控制到最小是非常重要的。该文从下面几个方面给出了建议，</p><ul><li><strong>部署卫生</strong>，如对新部署程序的健康检查</li><li><strong>上生产系统之前的测试</strong>，自动化单元、集成、预生产测试</li><li><strong>生产系统上的验证</strong>，分批的部署，控制故障影响半径</li><li><strong>控制何时发布软件</strong></li></ul><p>最后作者介绍了亚马逊如何快速执行业务创新 &ndash; 通过<strong>自动化一切事情</strong>。</p><h3 id=automating-safe-hands-off-deploymentsautomating-safe-hands-off-deployment><a href="https://aws.amazon.com/builders-library/automating-safe-hands-off-deployments/?did=ba_card&trk=ba_card">Automating safe, hands-off deployments</a>&nbsp;<a class=anchor href=#automating-safe-hands-off-deploymentsautomating-safe-hands-off-deployment><i class="small linkify icon"></i></a></h3><p>这篇文章很好的呼应了<a href="https://aws.amazon.com/builders-library/going-faster-with-continuous-delivery/?did=ba_card&trk=ba_card">Going faster with continuous delivery</a>一文中如何避免新的部署导致故障影响，非常详细的介绍了亚马逊关于自动化安全部署的实践。</p><p>对于持续部署，<code>源码</code> -> <code>构建</code> -> <code>测试</code> -> <code>生产</code> 这个流程大家都很熟悉。</p><figure><img src=https://d1.awsstatic.com/builderslibrary/architecture-images/1-Four-Pipeline-Phases.b168244d38855d468e594d26f0a5fcc40892a5da.PNG alt="4 pipeline phases"></figure><p>从下图看，亚马逊对于<code>源码</code>和<code>构建</code>的理解是非常深入和全面的。</p><figure><img src=https://d1.awsstatic.com/builderslibrary/architecture-images/2-Source-and-Build-Phases.e873d57fa8365a34e6fdb6699b3541caef9a019c.PNG alt="source and build"></figure><p><code>源码</code>并不仅仅是应用程序源代码，还可以包括运维工具代码、测试代码、基础架构代码、静态资源、依赖库、配置和操作系统补丁。</p><p><code>代码审核</code>是必须的。对于全自动的流水线，代码审核是最后一道人工核验。代码审核不仅仅是审核代码的正确性，还应该检查代码是否包括足够的测试，是否有完善的工具来监测部署以及能否安全的回退。</p><p>同时<code>构建</code>也不光是编译源代码，打包并存储构件。也包含单元测试，静态代码分析，代码覆盖率检查，代码审核检查。</p><p><code>测试</code>在亚马逊是一个多阶段的预生产环境，详见下图。</p><figure><img src=https://d1.awsstatic.com/builderslibrary/architecture-images/3-Test-Phase.32a876ed20c3d585a9a761c6b07f0c3af1fff21d.PNG alt="test deployments in pre-production environments"></figure><p>集成测试是自动化的模拟客户一样使用服务，实现端到端的测试。部署到生产之前，还需要执行向后兼容性测试以及借助负载均衡实现one-box测试。</p><p>AWS服务是部署在全球多个区域内的多个可用区，为了减少部署故障对客户的影响，<code>生产</code>通过<strong>波次</strong>部署来分批分阶段的安全部署。</p><figure><img src=https://d1.awsstatic.com/builderslibrary/architecture-images/5-Prod-Phase.31bac8cfc2ae3c68c5ee1e7332c0e6d7b2385bcf.PNG alt="production deployments"></figure><p>首先部署是在单区域的单可用区做one-box部署，如果引起负面问题，会自动回退并停止生产后续的部署。系统指标的监控是实现自动化安全部署的核心，需要通过监控的指标来自动触发部署回退。</p><p>Bake time也是实践经验总结出来的精髓。有时故障不是在部署后马上显现的，需要时间才会逐渐显现。设置合理的Bake time，能够让故障有足够时间被暴露出来，不至于照成大范围影响。</p><h3 id=ensuring-rollback-safety-during-deploymentsensuring-rollback-safety-during-deployments><a href="https://aws.amazon.com/builders-library/ensuring-rollback-safety-during-deployments/?did=ba_card&trk=ba_card">Ensuring rollback safety during deployments</a>&nbsp;<a class=anchor href=#ensuring-rollback-safety-during-deploymentsensuring-rollback-safety-during-deployments><i class="small linkify icon"></i></a></h3><p>因为故障是不可避免的，部署能够被安全回退是非常必要的。这篇文章就详细介绍了如何实现可安全回退的部署 &ndash; 通过<strong>两阶段部署的技术</strong>，以及序列化的最佳实践。</p><figure><img src=https://d1.awsstatic.com/legal/builders-library/Screenshots/two-phase-deployment.4322b209195704c61f7a3f311413a76f264afb8b.png alt="two-phase deployment technique"></figure><blockquote><p>这三篇文章分别从术和器的角度分享了亚马逊在软件部署的实践经验，开发者们可以结合自身业务情况集成适合的最佳实践。</p></blockquote></article></section><section class="ui secondary attached segment dream-tags"><a class="ui label pink" href=/tags/devops title=DevOps>DevOps</a>
<a class="ui label teal" href=/tags/continuous-deployment title="Continuous Deployment">Continuous Deployment</a>
<a class="ui label violet" href=/tags/amazon-builders-library title="Amazon Builders' Library">Amazon Builders' Library</a>
<a class="ui label pink" href=/tags/system-design title="System Design">System Design</a></section><section class="ui secondary bottom attached segment share row box"><div class=author><img class=avatar src=/img/portrait.jpg></div><div class="info grow flexbox"><p class=name>Kane</p><p class=desc>Three boys' father, open source mania.</p></div><section class="buttons row box"><div class="facebook none flexbox" href=# onclick="window.open('https://www.facebook.com/sharer/sharer.php?u='+encodeURIComponent(location.href),'facebook-share-dialog','width=626,height=436');return false;"><button class="ui facebook button"><i class="facebook icon"></i>Share</button></div><div class="twitter none flexbox" onclick="window.open('https://twitter.com/intent/tweet?text=Read &#34;亚马逊的部署最佳实践  https:\/\/kane.mx\/posts\/2020\/the-best-practise-of-deployment-at-amazon\/','_self')"><button class="ui twitter button"><i class="twitter icon"></i>Tweet</button></div></section></section><script src=https://utteranc.es/client.js repo=zxkane/articles issue-term=pathname theme=github-light crossorigin=anonymous async></script></div></div></div><div class=back><nav class="ui top secondary menu bar"><div class=item><i class="inverted big link bullseye icon dream-flip-toggle" title="About Me"></i></div><div class=item><a href=https://github.com/zxkane target=_blank><i id=ico class="inverted big link github icon" title=GitHub></i></a></div><div class=item><a href=mailto:me@kane.mx target=_blank><i id=ico class="inverted big link mail icon" title=Email></i></a></div><div class=item><a href=https://www.stackoverflow.com/users/390513/kane target=_blank><i id=ico class="inverted big link stack overflow icon" title="Stack Overflow"></i></a></div></nav><div class="ui centered grid about"><div class="sixteen wide mobile fifteen wide tablet fifteen wide computer column about"><section class="ui stacked segments"><div class="ui inverted segment"><article class=twemoji><h1 id=so-who-am-i>So, Who Am I?</h1><hr><p>I’m the father of three boys. Live in Beijing. Also I&rsquo;m the *uix user, a full stack software engineer, devops and cloud native evangelist.</p><p>Curious about me? Use the social links above to check out my profiles.</p></article></div></section></div></div></div></div></div><script src=/js/site.js></script><script src=https://twemoji.maxcdn.com/2/twemoji.min.js?2.6></script><script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-11561366-2','auto');ga('send','pageview');</script><script async src=https://www.google-analytics.com/analytics.js></script><script>(function(){console.log("Twemoji up and making stuff colourful!");for(var b=document.getElementsByClassName("twemoji"),a=0;a<b.length;a++){twemoji.parse(b[a]);}})();</script></body></html>