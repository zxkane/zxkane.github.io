<!doctype html><html lang=en data-figures class=page><head><title>基于 Flux 的 GitOps 实战（下） | The road</title>
<meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><meta http-equiv=X-UA-Compatible content="IE=edge"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-11561366-2"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-11561366-2")</script><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta name=description content="基于 GitOps 构建共享服务平台"><meta name=twitter:card content="summary"><meta name=twitter:creator content="@zxkane"><meta name=twitter:title content="基于 Flux 的 GitOps 实战（下）"><meta name=twitter:image content="https://kane.mx/posts/gitops/flux-in-action-2/flux-eyecatch.png"><meta property="og:url" content="https://kane.mx/posts/gitops/flux-in-action-2/"><meta property="og:title" content="基于 Flux 的 GitOps 实战（下）"><meta property="og:description" content="基于 GitOps 构建共享服务平台"><meta property="og:image" content="https://kane.mx/posts/gitops/flux-in-action-2/flux-eyecatch.png"><meta name=keywords content="GitOps,Kubernetes,Flux,Git,EKS,CD,Continuous Delivery"><link rel=apple-touch-icon sizes=180x180 href=https://kane.mx/icons/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://kane.mx/icons/favicon-32x32.png><link rel=manifest href=https://kane.mx/icons/site.webmanifest><link rel=canonical href=https://kane.mx/posts/gitops/flux-in-action-2/><link rel=preload href=https://kane.mx/css/styles.a556cef0edd8ecd9821e661f7f201d84cc18d0c6435703889db2949aea0eccb84b7ac9a2bb49093b03f5e7d9ce21c23c705efd6dcbd7e8018afae9a9f32ca095.css integrity="sha512-pVbO8O3Y7NmCHmYffyAdhMwY0MZDVwOInbKUmuoOzLhLesmiu0kJOwP159nOIcI8cF79bcvX6AGK+ump8yyglQ==" as=style crossorigin=anonymous><link rel=preload href=https://kane.mx/en/js/bundle.a037b368e4d333b6a2762e5edc10fd6b814dbfd7242bb391652e4836e47b43129672364610e5c6a374be92375affb74d08162abe4b11424c1d01bf389d13f25e.js as=script integrity="sha512-oDezaOTTM7aidi5e3BD9a4FNv9ckK7ORZS5INuR7QxKWcjZGEOXGo3S+kjda/7dNCBYqvksRQkwdAb84nRPyXg==" crossorigin=anonymous><link rel=stylesheet type=text/css href=https://kane.mx/css/styles.a556cef0edd8ecd9821e661f7f201d84cc18d0c6435703889db2949aea0eccb84b7ac9a2bb49093b03f5e7d9ce21c23c705efd6dcbd7e8018afae9a9f32ca095.css integrity="sha512-pVbO8O3Y7NmCHmYffyAdhMwY0MZDVwOInbKUmuoOzLhLesmiu0kJOwP159nOIcI8cF79bcvX6AGK+ump8yyglQ==" crossorigin=anonymous><script src=https://github.com/awslabs/clickstream-web/releases/download/v0.12.2/clickstream-web.min.js></script><script>window.ClickstreamAnalytics.init({appId:"blog",endpoint:"https://kane.clickstream.aws.kane.mx/collect",isLogEvents:!0,pageType:window.PageType.multiPageApp,sendMode:window.SendMode.Immediate})</script><script>(function(e,t,n,s,o,i,a,r){a=window.AwsRumClient={q:[],n:e,i:t,v:n,r:s,c:i},window[e]=function(e,t){a.q.push({c:e,p:t})},r=document.createElement("script"),r.async=!0,r.src=o,document.head.insertBefore(r,document.getElementsByTagName("script")[0])})("cwr","fa917d5b-45b4-46ec-818d-68aff21788c9","1.0.0","ap-southeast-1","https://client.rum.us-east-1.amazonaws.com/1.0.2/cwr.js",{sessionSampleRate:1,guestRoleArn:"arn:aws:iam::845861764576:role/RUM-Monitor-ap-southeast-1-845861764576-0657904438361-Unauth",identityPoolId:"ap-southeast-1:04dcb4a6-b379-4bf9-a28a-be7f5c7deb12",endpoint:"https://dataplane.rum.ap-southeast-1.amazonaws.com",telemetries:["performance","errors","http"],allowCookies:!0,enableXRay:!0})</script></head><body data-code=20 data-lines=false id=documentTop data-lang=en><header class=nav_header><nav class=nav><a href=https://kane.mx/ class="nav_brand nav_item nav_hide" title="The road">The road<div class=nav_close><div><svg class="icon"><title>open-menu</title><use xlink:href="#open-menu"/></svg><svg class="icon"><title>closeme</title><use xlink:href="#closeme"/></svg></div></div></a><div class='nav_body nav_body_left'><div class=nav_parent><a href=https://kane.mx/ class=nav_item title="The Road">The Road</a></div><div class=nav_parent><a href=https://kane.mx/ class=nav_item title=Series>Series <img src=https://kane.mx/icons/caret-icon.svg alt=icon class=nav_icon></a><div class=nav_sub><span class=nav_child></span>
<a href=https://kane.mx/series/effective-cloud-computing/ class="nav_child nav_item" title="Effective Cloud Computing">Effective Cloud Computing</a>
<a href=https://kane.mx/series/clickstream-analytics/ class="nav_child nav_item" title="Deep Dive Clickstream Analytics">Deep Dive Clickstream Analytics</a>
<a href=https://kane.mx/series/gitops/ class="nav_child nav_item" title=GitOps>GitOps</a>
<a href=https://kane.mx/series/serverless-computing/ class="nav_child nav_item" title=Serverless>Serverless</a>
<a href=https://kane.mx/series/amazon-builders-library/ class="nav_child nav_item" title="Amazon Builders Library">Amazon Builders Library</a></div></div><div class=nav_parent><a href=https://kane.mx/about/ class=nav_item title=About>About</a></div><div class=nav_parent><a href=# class=nav_item>🌐</a><div class=nav_sub><span class=nav_child></span>
<a href=https://kane.mx/ class="nav_child nav_item">English</a>
<a href=https://kane.mx/zh/ class="nav_child nav_item"></a></div></div><a href=https://kane.mx/ class="nav_brand nav_item nav_center" title="The road">The road</a><div class=follow><a href=https://github.com/zxkane><svg class="icon"><title>github</title><use xlink:href="#github"/></svg>
</a><a href=https://twitter.com/zxkane><svg class="icon"><title>twitter</title><use xlink:href="#twitter"/></svg>
</a><a href=https://stackoverflow.com/users/390513/kane><svg class="icon"><title>stackoverflow</title><use xlink:href="#stackoverflow"/></svg>
</a><a href=https://kane.mx/index.xml><svg class="icon"><title>rss</title><use xlink:href="#rss"/></svg></a><div class=color_mode><input type=checkbox class=color_choice id=mode></div></div></div></nav></header><main><div class="grid-inverse wrap content"><article class=post_content><h1 class=post_title>基于 Flux 的 GitOps 实战（下）</h1><div class=post_meta><span><svg class="icon"><title>calendar</title><use xlink:href="#calendar"/></svg>
</span><span class=post_date>May 8, 2022</span>
<span class=post_time>· 8 min read</span><span>&nbsp;· <a href=https://kane.mx/tags/gitops/ title=GitOps class="post_tag button button_translucent">GitOps
</a><a href=https://kane.mx/tags/kubernetes/ title=Kubernetes class="post_tag button button_translucent">Kubernetes
</a><a href=https://kane.mx/tags/flux/ title=Flux class="post_tag button button_translucent">Flux
</a><a href=https://kane.mx/tags/git/ title=Git class="post_tag button button_translucent">Git
</a><a href=https://kane.mx/tags/eks/ title=EKS class="post_tag button button_translucent">EKS
</a><a href=https://kane.mx/tags/cd/ title=CD class="post_tag button button_translucent">CD
</a><a href=https://kane.mx/tags/continuous-delivery/ title="Continuous Delivery" class="post_tag button button_translucent">Continuous Delivery
</a></span><span class=page_only>&nbsp;·<div class=post_share>Share on:
<a href="https://twitter.com/intent/tweet?text=%e5%9f%ba%e4%ba%8e%20Flux%20%e7%9a%84%20GitOps%20%e5%ae%9e%e6%88%98%ef%bc%88%e4%b8%8b%ef%bc%89&url=https%3a%2f%2fkane.mx%2fposts%2fgitops%2fflux-in-action-2%2f&tw_p=tweetbutton" class=twitter title="Share on Twitter" target=_blank rel=nofollow><svg class="icon"><title>twitter</title><use xlink:href="#twitter"/></svg>
</a><a href="https://www.facebook.com/sharer.php?u=https%3a%2f%2fkane.mx%2fposts%2fgitops%2fflux-in-action-2%2f&t=%e5%9f%ba%e4%ba%8e%20Flux%20%e7%9a%84%20GitOps%20%e5%ae%9e%e6%88%98%ef%bc%88%e4%b8%8b%ef%bc%89" class=facebook title="Share on Facebook" target=_blank rel=nofollow><svg class="icon"><title>facebook</title><use xlink:href="#facebook"/></svg>
</a><a href=#linkedinshare id=linkedinshare class=linkedin title="Share on LinkedIn" rel=nofollow><svg class="icon"><title>linkedin</title><use xlink:href="#linkedin"/></svg>
</a><a href=https://kane.mx/posts/gitops/flux-in-action-2/ title="Copy Link" class="link link_yank"><svg class="icon"><title>copy</title><use xlink:href="#copy"/></svg></a></div></span></div><div class=post_toc><h2>Overview</h2><nav id=TableOfContents><ul><li><a href=#一基于-gitops-的共享服务平台设定>一、基于 GitOps 的共享服务平台设定</a></li><li><a href=#二flux-多租户的安全设置>二、Flux 多租户的安全设置</a></li><li><a href=#三租户的集群资源管理>三、租户的集群资源管理</a></li><li><a href=#四租户隔离且自服务的应用持续部署>四、租户隔离且自服务的应用持续部署</a></li><li><a href=#五自动发布镜像更新>五、自动发布镜像更新</a><ul><li><a href=#1-部署微服务应用程序-sock-shop>1. 部署微服务应用程序 Sock Shop</a></li><li><a href=#2-注册-front-end-微服务的镜像仓库ghcr-front-end>2. 注册 <code>front-end</code> 微服务的<a href=https://github.com/zxkane/front-end/pkgs/container/weaveworksdemos%2Ffront-end>镜像仓库</a></a></li><li><a href=#3-设置镜像更新策略>3. 设置镜像更新策略</a></li><li><a href=#4-创建自动镜像更新配置>4. 创建自动镜像更新配置</a></li><li><a href=#5-为应用-gitops-仓库配置读写凭证>5. 为应用 GitOps 仓库配置读写凭证</a></li><li><a href=#6-验证镜像自动更新>6. 验证镜像自动更新</a></li></ul></li><li><a href=#六小结及展望>六、小结及展望</a></li></ul></nav></div><div class=post_body><p>在<a href=/posts/gitops/flux-in-action-1/>上篇</a>介绍基于 CNCF 下的 GitOps 工具 FluxCD v2
实现了管理多账户的 Kubernetes 集群的共享组件，Secrets 使用的最佳实践，
GitOps 流水线事件同 IM(Slack) 的集成，以及对 GitOps 代码的 CI 流程。</p><p>本文将围绕如何使用 Flux 的多租户管理最佳实践，打造基于 GitOps 工作流程的共享服务平台，
实现租户(业务/应用团队)可自助的持续部署。</p><h2 id=一基于-gitops-的共享服务平台设定>一、基于 GitOps 的共享服务平台设定</h2><p>Kubernetes 提供了命名空间作为一种机制将同一集群中的资源划分为相互隔离的组。
同一个集群中多租户多团队的应用管理将沿用 Kubernetes 内置的各种机制来为不同的租户、团队或应用进行隔离，包括且不限于，</p><ul><li>命名空间(<a href=https://kubernetes.io/docs/concepts/overview/working-with-objects/namespaces/>Namespaces</a>)</li><li>资源配额(<a href=https://kubernetes.io/docs/concepts/policy/resource-quotas/>Resource Quotas</a>)，限制应用的资源总量</li><li><a href=https://kubernetes.io/docs/reference/access-authn-authz/rbac/>RBAC 鉴权</a>，限制应用的权限，如可创建 Ingress，不可创建密钥可读取指定名称的密钥，不可创建<a href=https://kubernetes.io/docs/concepts/storage/persistent-volumes/>持久卷</a>等</li><li>网络策略(<a href=https://kubernetes.io/docs/concepts/services-networking/network-policies/>Network Policies</a>)</li></ul><p>基于 Kubernetes 以上能力，为基于 GitOps 的共享服务平台设定如下，</p><ul><li>平台团队通过一个 Git 仓库来管理多个跨网络跨账户跨云平台的 Kubernetes 集群，平台团队通过 GitOps 管理如下资源，<ul><li>GitOps Toolkit 组件，如 Flux</li><li>集群共享组件，如 CNI, CSI Driver, Ingress Class，Service Accounts, CRD, DNS 等</li><li>可观测性的共享组件，如 Log, Metrics, Trace</li><li>每个租户/团队/应用的基础资源，如 Namespaces, Resource Quotas, Open Policy，Service Accounts，密钥等</li></ul></li><li>为集群中的每个租户/团队/应用使用独立的 Git 仓库来隔离其持续部署，假设有应用名为 <code>app-a</code>，<ul><li>应用 <code>app-a</code> 相关的资源都将部署在命名空间 <code>app-a</code></li><li>限制应用使用的总资源，如不超过 2 vCPU, 4 GiB 内存</li><li>应用团队使用独立的 Git 仓库来管理应用编排，应用团队将负责应用发布到不同 stage 环境的节奏</li><li>应用团队可以使用 Kustomization、Helm 部署应用</li><li>应用团队无法创建集群相关的组件，如持久卷、CRD 等资源</li><li>应用团队无法创建密钥、Service Account等资源，但仅可使用 infra 团队提前为应用创建的这类资源</li></ul></li></ul><h2 id=二flux-多租户的安全设置>二、Flux 多租户的安全设置</h2><p>对于一个使用命名空间在隔离多租户的集群，Flux 提供了<a href=https://fluxcd.io/docs/components/kustomize/kustomization/#cross-namespace-references>选项</a>来禁止跨命令空间的引用，
例如，Flux 的 <a href=https://fluxcd.io/docs/components/kustomize/kustomization/>Kustomization</a> 或 <a href=https://fluxcd.io/docs/components/helm/helmreleases/>Helm Releases</a> 禁止引用其他命名空间定义的 <a href=https://fluxcd.io/docs/components/source/>Source</a>。
同时，启用<a href=https://fluxcd.io/docs/components/kustomize/kustomization/#enforce-impersonation>强制模拟</a>功能，将 <a href=https://fluxcd.io/docs/components/kustomize/kustomization/>Kustomization</a> 或 <a href=https://fluxcd.io/docs/components/helm/helmreleases/>Helm Releases</a>
资源的部署默认限制到最小来显示的提升部署的安全性。</p><p>遵循以上 Flux 的多租户安全最佳实践，进行如下 Flux Toolkits 配置（<code>./cluster/cluster-dev/kustomization.yaml</code>）
来禁用跨命名空间引用和强制模拟限制 Kustomization 和 Helm 部署的默认权限，</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=ln> 1</span><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>kustomize.config.k8s.io/v1beta1</span><span class=w>
</span></span></span><span class=line><span class=ln> 2</span><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Kustomization</span><span class=w>
</span></span></span><span class=line><span class=ln> 3</span><span class=cl><span class=w></span><span class=nt>resources</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 4</span><span class=cl><span class=w>  </span>- <span class=l>gotk-components.yaml</span><span class=w>
</span></span></span><span class=line><span class=ln> 5</span><span class=cl><span class=w>  </span>- <span class=l>gotk-sync.yaml</span><span class=w>
</span></span></span><span class="line hl"><span class=ln> 6</span><span class=cl><span class=w></span><span class=nt>patches</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=ln> 7</span><span class=cl><span class=w>  </span>- <span class=nt>patch</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class="line hl"><span class=ln> 8</span><span class=cl><span class=sd>      - op: add
</span></span></span><span class="line hl"><span class=ln> 9</span><span class=cl><span class=sd>        path: /spec/template/spec/containers/0/args/0
</span></span></span><span class="line hl"><span class=ln>10</span><span class=cl><span class=sd>        value: --no-cross-namespace-refs=true</span><span class=w>      
</span></span></span><span class="line hl"><span class=ln>11</span><span class=cl><span class=w>    </span><span class=nt>target</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=ln>12</span><span class=cl><span class=w>      </span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Deployment</span><span class=w>
</span></span></span><span class="line hl"><span class=ln>13</span><span class=cl><span class=w>      </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=p>&gt;-</span><span class=sd>
</span></span></span><span class="line hl"><span class=ln>14</span><span class=cl><span class=sd>        (kustomize-controller|helm-controller|notification-controller|image-reflector-controller|image-automation-controller)</span><span class=w>        
</span></span></span><span class="line hl"><span class=ln>15</span><span class=cl><span class=w>  </span>- <span class=nt>patch</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class="line hl"><span class=ln>16</span><span class=cl><span class=sd>      - op: add
</span></span></span><span class="line hl"><span class=ln>17</span><span class=cl><span class=sd>        path: /spec/template/spec/containers/0/args/0
</span></span></span><span class="line hl"><span class=ln>18</span><span class=cl><span class=sd>        value: --default-service-account=default</span><span class=w>      
</span></span></span><span class="line hl"><span class=ln>19</span><span class=cl><span class=w>    </span><span class=nt>target</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=ln>20</span><span class=cl><span class=w>      </span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Deployment</span><span class=w>
</span></span></span><span class="line hl"><span class=ln>21</span><span class=cl><span class=w>      </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>(kustomize-controller|helm-controller)</span><span class=w>
</span></span></span><span class="line hl"><span class=ln>22</span><span class=cl><span class=w>  </span>- <span class=nt>patch</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class="line hl"><span class=ln>23</span><span class=cl><span class=sd>      - op: add
</span></span></span><span class="line hl"><span class=ln>24</span><span class=cl><span class=sd>        path: /spec/serviceAccountName
</span></span></span><span class="line hl"><span class=ln>25</span><span class=cl><span class=sd>        value: kustomize-controller</span><span class=w>      
</span></span></span><span class="line hl"><span class=ln>26</span><span class=cl><span class=w>    </span><span class=nt>target</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=ln>27</span><span class=cl><span class=w>      </span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Kustomization</span><span class=w>
</span></span></span><span class="line hl"><span class=ln>28</span><span class=cl><span class=w>      </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>flux-system</span><span class=w>
</span></span></span><span class="line hl"><span class=ln>29</span><span class=cl><span class=w>  </span>- <span class=nt>patch</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class="line hl"><span class=ln>30</span><span class=cl><span class=sd>      - op: add
</span></span></span><span class="line hl"><span class=ln>31</span><span class=cl><span class=sd>        path: /spec/serviceAccountName
</span></span></span><span class="line hl"><span class=ln>32</span><span class=cl><span class=sd>        value: helm-controller</span><span class=w>      
</span></span></span><span class="line hl"><span class=ln>33</span><span class=cl><span class=w>    </span><span class=nt>target</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=ln>34</span><span class=cl><span class=w>      </span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>HelmRelease</span><span class=w>
</span></span></span><span class="line hl"><span class=ln>35</span><span class=cl><span class=w>      </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>flux-system  </span><span class=w>
</span></span></span></code></pre></div><p>同时为 infra 团队管理的共享 Kustomization/Helm 组件部署显示的指定部署权限，
例如，<code>DEV</code>环境 infrastructure 配置的入口<code>./clusters/cluster-dev/infrastructure.yaml</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=ln> 1</span><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>kustomize.toolkit.fluxcd.io/v1beta2</span><span class=w>
</span></span></span><span class=line><span class=ln> 2</span><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Kustomization</span><span class=w>
</span></span></span><span class=line><span class=ln> 3</span><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 4</span><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>infrastructure</span><span class=w>
</span></span></span><span class=line><span class=ln> 5</span><span class=cl><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class=l>flux-system</span><span class=w>
</span></span></span><span class=line><span class=ln> 6</span><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 7</span><span class=cl><span class=w>  </span><span class=nt>interval</span><span class=p>:</span><span class=w> </span><span class=l>10m0s</span><span class=w>
</span></span></span><span class="line hl"><span class=ln> 8</span><span class=cl><span class=w>  </span><span class=nt>serviceAccountName</span><span class=p>:</span><span class=w> </span><span class=l>kustomize-controller</span><span class=w>
</span></span></span><span class=line><span class=ln> 9</span><span class=cl><span class=w>  </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=l>./infrastructure/overlays/product</span><span class=w>
</span></span></span><span class=line><span class=ln>10</span><span class=cl><span class=w>  </span><span class=nt>prune</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=ln>11</span><span class=cl><span class=w>  </span><span class=nt>sourceRef</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>12</span><span class=cl><span class=w>    </span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>GitRepository</span><span class=w>
</span></span></span><span class=line><span class=ln>13</span><span class=cl><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>flux-system</span><span class=w>
</span></span></span></code></pre></div><p>或通过 Kustomize 的补丁机制为所有的 Kustomization/Helm Flux 自定义资源指定部署权限，
例如<code>DEV</code>环境的overlay的入口<code>./infrastructure/overlays/development/kustomization.yaml</code>配置，</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=ln> 1</span><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>kustomize.config.k8s.io/v1beta1</span><span class=w>
</span></span></span><span class=line><span class=ln> 2</span><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Kustomization</span><span class=w>
</span></span></span><span class=line><span class=ln> 3</span><span class=cl><span class=w></span><span class=nt>resources</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 4</span><span class=cl><span class=w>  </span>- <span class=l>../../base</span><span class=w>
</span></span></span><span class=line><span class=ln> 5</span><span class=cl><span class=w>  </span>- <span class=l>./secrets.yaml</span><span class=w>
</span></span></span><span class=line><span class=ln> 6</span><span class=cl><span class=w></span><span class=nt>patches</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 7</span><span class=cl><span class=w>  </span>- <span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=l>./aws-load-balancer-controller-patch.yaml</span><span class=w>
</span></span></span><span class=line><span class=ln> 8</span><span class=cl><span class=w>  </span>- <span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=l>./aws-load-balancer-serviceaccount-patch.yaml</span><span class=w>
</span></span></span><span class=line><span class=ln> 9</span><span class=cl><span class=w>  </span>- <span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=l>./dns-patch.yaml</span><span class=w>
</span></span></span><span class=line><span class=ln>10</span><span class=cl><span class=w>  </span>- <span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=l>./dns-sa-patch.yaml</span><span class=w>
</span></span></span><span class=line><span class=ln>11</span><span class=cl><span class=w>  </span>- <span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=l>./slack-patch.yaml</span><span class=w>
</span></span></span><span class="line hl"><span class=ln>12</span><span class=cl><span class=w>  </span>- <span class=nt>patch</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class="line hl"><span class=ln>13</span><span class=cl><span class=sd>      - op: add
</span></span></span><span class="line hl"><span class=ln>14</span><span class=cl><span class=sd>        path: /spec/serviceAccountName
</span></span></span><span class="line hl"><span class=ln>15</span><span class=cl><span class=sd>        value: kustomize-controller</span><span class=w>      
</span></span></span><span class="line hl"><span class=ln>16</span><span class=cl><span class=w>    </span><span class=nt>target</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=ln>17</span><span class=cl><span class=w>      </span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Kustomization</span><span class=w>
</span></span></span><span class="line hl"><span class=ln>18</span><span class=cl><span class=w>      </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class=l>(flux-system|kube-system|mariadb)</span><span class=w>
</span></span></span><span class="line hl"><span class=ln>19</span><span class=cl><span class=w>  </span>- <span class=nt>patch</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class="line hl"><span class=ln>20</span><span class=cl><span class=sd>      - op: add
</span></span></span><span class="line hl"><span class=ln>21</span><span class=cl><span class=sd>        path: /spec/serviceAccountName
</span></span></span><span class="line hl"><span class=ln>22</span><span class=cl><span class=sd>        value: helm-controller</span><span class=w>      
</span></span></span><span class="line hl"><span class=ln>23</span><span class=cl><span class=w>    </span><span class=nt>target</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=ln>24</span><span class=cl><span class=w>      </span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>HelmRelease</span><span class=w>
</span></span></span><span class="line hl"><span class=ln>25</span><span class=cl><span class=w>      </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class=l>(flux-system|kube-system|mariadb)  </span><span class=w>
</span></span></span></code></pre></div><div class="notices tip"><div class=label>最佳实践</div><p>通过在平台团队管理的 Kustomization 配置中，强制为应用团队 Git 仓库的 <code>Kustomization</code>, <code>HelmRelease</code>
等部署对象指定部署时使用的 <code>Service Account</code>。</p></div><h2 id=三租户的集群资源管理>三、租户的集群资源管理</h2><p>基于前面的管理需求假设，在 infrastructure Git 仓库中，专门为多租户/多团队/多应用创建如下目录结构，
共享 apps 通常的租户配置，例如，<strong>命名空间</strong>，<strong>RBAC</strong>(通过 Service Account)加上 <strong>Policy</strong> 实现等。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=ln> 1</span><span class=cl>apps
</span></span><span class=line><span class=ln> 2</span><span class=cl>|-- base
</span></span><span class=line><span class=ln> 3</span><span class=cl>|   |-- app-a
</span></span><span class=line><span class=ln> 4</span><span class=cl>|   |   |-- bitnami.yaml
</span></span><span class=line><span class=ln> 5</span><span class=cl>|   |   |-- kustomization.yaml
</span></span><span class=line><span class=ln> 6</span><span class=cl>|   |   |-- namespace.yaml
</span></span><span class=line><span class=ln> 7</span><span class=cl>|   |   |-- policies.yaml
</span></span><span class=line><span class=ln> 8</span><span class=cl>|   |   `-- rbac.yaml
</span></span><span class=line><span class=ln> 9</span><span class=cl>|   `-- kustomization.yaml
</span></span><span class=line><span class=ln>10</span><span class=cl>`-- overlays
</span></span><span class=line><span class=ln>11</span><span class=cl>    `-- development
</span></span><span class=line><span class=ln>12</span><span class=cl>        |-- app-a
</span></span><span class=line><span class=ln>13</span><span class=cl>        |   |-- kustomization.yaml
</span></span><span class=line><span class=ln>14</span><span class=cl>        |   `-- prestashop-sealed-secrets.yaml
</span></span><span class=line><span class=ln>15</span><span class=cl>        `-- kustomization.yaml
</span></span></code></pre></div><p>同时创建一个 apps 的 Kustomization 入口配置同集群集成，例如 <code>./clusters/cluster-dev/apps.yaml</code> 文件内容如下，</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=ln> 1</span><span class=cl><span class=n>apiVersion</span><span class=p>:</span> <span class=n>kustomize</span><span class=o>.</span><span class=n>toolkit</span><span class=o>.</span><span class=n>fluxcd</span><span class=o>.</span><span class=n>io</span><span class=o>/</span><span class=n>v1beta2</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl><span class=n>kind</span><span class=p>:</span> <span class=n>Kustomization</span>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=n>metadata</span><span class=p>:</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>  <span class=n>name</span><span class=p>:</span> <span class=n>apps</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>  <span class=n>namespace</span><span class=p>:</span> <span class=n>flux</span><span class=o>-</span><span class=n>system</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl><span class=n>spec</span><span class=p>:</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>  <span class=n>dependsOn</span><span class=p>:</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>    <span class=o>-</span> <span class=n>name</span><span class=p>:</span> <span class=n>infrastructure</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>  <span class=n>interval</span><span class=p>:</span> <span class=mi>3</span><span class=n>m0s</span>
</span></span><span class="line hl"><span class=ln>10</span><span class=cl>  <span class=n>serviceAccountName</span><span class=p>:</span> <span class=n>kustomize</span><span class=o>-</span><span class=n>controller</span>
</span></span><span class="line hl"><span class=ln>11</span><span class=cl>  <span class=n>path</span><span class=p>:</span> <span class=o>./</span><span class=n>apps</span><span class=o>/</span><span class=n>overlays</span><span class=o>/</span><span class=n>development</span>
</span></span><span class=line><span class=ln>12</span><span class=cl>  <span class=n>prune</span><span class=p>:</span> <span class=bp>true</span>
</span></span><span class=line><span class=ln>13</span><span class=cl>  <span class=n>sourceRef</span><span class=p>:</span>
</span></span><span class=line><span class=ln>14</span><span class=cl>    <span class=n>kind</span><span class=p>:</span> <span class=n>GitRepository</span>
</span></span><span class=line><span class=ln>15</span><span class=cl>    <span class=n>name</span><span class=p>:</span> <span class=n>flux</span><span class=o>-</span><span class=n>system</span>
</span></span></code></pre></div><div class="notices tip"><div class=label>最佳实践</div><p>Kubernetes 原生的 RBAC 权限控制无法细粒度的控制资源权限，如资源创建必须指定某些 Label 等。
但结合 Policy as Code，如 <a href=https://github.com/open-policy-agent/gatekeeper>Gatekeeper</a>, <a href=https://kyverno.io/>Kyverno</a> 可以满足细粒度的管理需求。</p></div><p>为应用 <code>app-a</code> 创建了如下 Policy，仅允许应用通过自助的 Git 仓库在部署时仅可创建 Helm Chart 部署必须的 Secrets。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=ln> 1</span><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>kyverno.io/v1</span><span class=w>
</span></span></span><span class=line><span class=ln> 2</span><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Policy</span><span class=w>
</span></span></span><span class=line><span class=ln> 3</span><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 4</span><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>restrict-secrets-by-type</span><span class=w>
</span></span></span><span class=line><span class=ln> 5</span><span class=cl><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class=l>app-a</span><span class=w>
</span></span></span><span class=line><span class=ln> 6</span><span class=cl><span class=w>  </span><span class=nt>annotations</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 7</span><span class=cl><span class=w>    </span><span class=nt>policies.kyverno.io/title</span><span class=p>:</span><span class=w> </span><span class=l>Restrict Secrets by Name</span><span class=w>
</span></span></span><span class=line><span class=ln> 8</span><span class=cl><span class=w>    </span><span class=nt>policies.kyverno.io/category</span><span class=p>:</span><span class=w> </span><span class=l>security</span><span class=w>
</span></span></span><span class=line><span class=ln> 9</span><span class=cl><span class=w>    </span><span class=nt>policies.kyverno.io/subject</span><span class=p>:</span><span class=w> </span><span class=l>Secret</span><span class=w>
</span></span></span><span class=line><span class=ln>10</span><span class=cl><span class=w>    </span><span class=nt>policies.kyverno.io/description</span><span class=p>:</span><span class=w> </span><span class=p>&gt;-</span><span class=sd>
</span></span></span><span class=line><span class=ln>11</span><span class=cl><span class=sd>      Disallow creating/deleting secrets in namespace &#39;app-a&#39; beside the helm
</span></span></span><span class=line><span class=ln>12</span><span class=cl><span class=sd>      storage.</span><span class=w>      
</span></span></span><span class=line><span class=ln>13</span><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>14</span><span class=cl><span class=w>  </span><span class=nt>background</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=w>
</span></span></span><span class=line><span class=ln>15</span><span class=cl><span class=w>  </span><span class=nt>validationFailureAction</span><span class=p>:</span><span class=w> </span><span class=l>enforce</span><span class=w>
</span></span></span><span class=line><span class=ln>16</span><span class=cl><span class=w>  </span><span class=nt>rules</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>17</span><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>safe-secrets-for-helm-storage</span><span class=w>
</span></span></span><span class=line><span class=ln>18</span><span class=cl><span class=w>      </span><span class=nt>match</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>19</span><span class=cl><span class=w>        </span><span class=nt>resources</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>20</span><span class=cl><span class=w>          </span><span class=nt>kinds</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>21</span><span class=cl><span class=w>            </span>- <span class=l>Secret</span><span class=w>
</span></span></span><span class=line><span class=ln>22</span><span class=cl><span class=w>      </span><span class=nt>preconditions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>23</span><span class=cl><span class=w>        </span><span class=nt>all</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>24</span><span class=cl><span class=w>          </span>- <span class=nt>key</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;{{request.operation}}&#39;</span><span class=w>
</span></span></span><span class=line><span class=ln>25</span><span class=cl><span class=w>            </span><span class=nt>operator</span><span class=p>:</span><span class=w> </span><span class=l>In</span><span class=w>
</span></span></span><span class=line><span class=ln>26</span><span class=cl><span class=w>            </span><span class=nt>value</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>27</span><span class=cl><span class=w>              </span>- <span class=l>CREATE</span><span class=w>
</span></span></span><span class=line><span class=ln>28</span><span class=cl><span class=w>              </span>- <span class=l>UPDATE</span><span class=w>
</span></span></span><span class=line><span class=ln>29</span><span class=cl><span class=w>              </span>- <span class=l>DELETE</span><span class=w>
</span></span></span><span class=line><span class=ln>30</span><span class=cl><span class=w>          </span>- <span class=nt>key</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;{{serviceAccountName}}&#39;</span><span class=w>
</span></span></span><span class=line><span class=ln>31</span><span class=cl><span class=w>            </span><span class=nt>operator</span><span class=p>:</span><span class=w> </span><span class=l>Equals</span><span class=w>
</span></span></span><span class=line><span class=ln>32</span><span class=cl><span class=w>            </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=l>app-a-reconciler</span><span class=w>
</span></span></span><span class=line><span class=ln>33</span><span class=cl><span class=w>      </span><span class=nt>validate</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>34</span><span class=cl><span class=w>        </span><span class=nt>message</span><span class=p>:</span><span class=w> </span><span class=l>Only Secrets are created by Helm v3+</span><span class=w>
</span></span></span><span class=line><span class=ln>35</span><span class=cl><span class=w>        </span><span class=nt>pattern</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>36</span><span class=cl><span class=w>          </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>helm.sh/release.v1</span><span class=w>
</span></span></span></code></pre></div><h2 id=四租户隔离且自服务的应用持续部署>四、租户隔离且自服务的应用持续部署</h2><p>上一步为租户/应用 <code>app-a</code> 配置了独立的命令空间，部署权限，策略等。同时为应用 <code>app-a</code> 创建了<a href=https://github.com/zxkane/eks-gitops-app-a>独立的 GitOps 仓库</a>，
应用团队可以通过独立的 Git 仓库自主的发布其应用程序到不同的 STAGING 集群。
如示例中的仓库，应用团队使用 Kustomize 管理不同 STAGING 环境的部署，且通过 Helm 方式部署了电商应用 <a href=https://github.com/bitnami/charts/tree/master/bitnami/prestashop>Prestashop</a>。
应用团队的部署可以使用由 infrastructure 团队统一管理的 External DNS, Ingress Class, 应用所在命名空间的 Secrets。</p><p>最终平台团队将应用 <code>app-a</code> 独立的仓库作为一个新的 GitOps 来源，通过如下配置将应用仓库的部署同集群关联上，</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=ln> 1</span><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>source.toolkit.fluxcd.io/v1beta1</span><span class=w>
</span></span></span><span class="line hl"><span class=ln> 2</span><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>GitRepository</span><span class=w>
</span></span></span><span class=line><span class=ln> 3</span><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 4</span><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>app-a-tenant</span><span class=w>
</span></span></span><span class=line><span class=ln> 5</span><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 6</span><span class=cl><span class=w>  </span><span class=nt>interval</span><span class=p>:</span><span class=w> </span><span class=l>1m</span><span class=w>
</span></span></span><span class="line hl"><span class=ln> 7</span><span class=cl><span class=w>  </span><span class=nt>url</span><span class=p>:</span><span class=w> </span><span class=l>https://github.com/zxkane/eks-gitops-app-a.git</span><span class=w>
</span></span></span><span class="line hl"><span class=ln> 8</span><span class=cl><span class=w>  </span><span class=nt>ref</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=ln> 9</span><span class=cl><span class=w>    </span><span class=nt>branch</span><span class=p>:</span><span class=w> </span><span class=l>main  </span><span class=w>
</span></span></span><span class=line><span class=ln>10</span><span class=cl><span class=w></span><span class=nn>---</span><span class=w>
</span></span></span><span class=line><span class=ln>11</span><span class=cl><span class=w></span><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>kustomize.toolkit.fluxcd.io/v1beta2</span><span class=w>
</span></span></span><span class=line><span class=ln>12</span><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Kustomization</span><span class=w>
</span></span></span><span class=line><span class=ln>13</span><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>14</span><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>app-a-tenant</span><span class=w>
</span></span></span><span class=line><span class=ln>15</span><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>16</span><span class=cl><span class=w>  </span><span class=nt>serviceAccountName</span><span class=p>:</span><span class=w> </span><span class=l>app-a-reconciler</span><span class=w>
</span></span></span><span class=line><span class=ln>17</span><span class=cl><span class=w>  </span><span class=nt>interval</span><span class=p>:</span><span class=w> </span><span class=l>5m0s</span><span class=w>
</span></span></span><span class=line><span class=ln>18</span><span class=cl><span class=w>  </span><span class=nt>retryInterval</span><span class=p>:</span><span class=w> </span><span class=l>5m0s</span><span class=w>
</span></span></span><span class=line><span class=ln>19</span><span class=cl><span class=w>  </span><span class=nt>prune</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class="line hl"><span class=ln>20</span><span class=cl><span class=w>  </span><span class=nt>sourceRef</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=ln>21</span><span class=cl><span class=w>    </span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>GitRepository</span><span class=w>
</span></span></span><span class="line hl"><span class=ln>22</span><span class=cl><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>app-a-tenant</span><span class=w>
</span></span></span><span class="line hl"><span class=ln>23</span><span class=cl><span class=w>    </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class=l>app-a</span><span class=w>
</span></span></span><span class=line><span class=ln>24</span><span class=cl><span class=w>  </span><span class=nt>patches</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>25</span><span class=cl><span class=w>    </span>- <span class=nt>patch</span><span class=p>:</span><span class=w> </span><span class=p>|-</span><span class=sd>
</span></span></span><span class=line><span class=ln>26</span><span class=cl><span class=sd>        - op: replace
</span></span></span><span class=line><span class=ln>27</span><span class=cl><span class=sd>          path: /spec/serviceAccountName
</span></span></span><span class=line><span class=ln>28</span><span class=cl><span class=sd>          value: app-a-reconciler
</span></span></span><span class=line><span class=ln>29</span><span class=cl><span class=sd>        - op: replace
</span></span></span><span class=line><span class=ln>30</span><span class=cl><span class=sd>          path: /metadata/namespace
</span></span></span><span class=line><span class=ln>31</span><span class=cl><span class=sd>          value: app-a</span><span class=w>        
</span></span></span><span class=line><span class=ln>32</span><span class=cl><span class=w>      </span><span class=nt>target</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>33</span><span class=cl><span class=w>        </span><span class=nt>group</span><span class=p>:</span><span class=w> </span><span class=l>helm.toolkit.fluxcd.io</span><span class=w>
</span></span></span><span class=line><span class=ln>34</span><span class=cl><span class=w>        </span><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=l>v2beta1</span><span class=w>
</span></span></span><span class=line><span class=ln>35</span><span class=cl><span class=w>        </span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>HelmRelease</span><span class=w>
</span></span></span><span class=line><span class=ln>36</span><span class=cl><span class=w>    </span>- <span class=nt>patch</span><span class=p>:</span><span class=w> </span><span class=p>|-</span><span class=sd>
</span></span></span><span class=line><span class=ln>37</span><span class=cl><span class=sd>        - op: replace
</span></span></span><span class=line><span class=ln>38</span><span class=cl><span class=sd>          path: /spec/serviceAccountName
</span></span></span><span class=line><span class=ln>39</span><span class=cl><span class=sd>          value: app-a-reconciler
</span></span></span><span class=line><span class=ln>40</span><span class=cl><span class=sd>        - op: replace
</span></span></span><span class=line><span class=ln>41</span><span class=cl><span class=sd>          path: /metadata/namespace
</span></span></span><span class=line><span class=ln>42</span><span class=cl><span class=sd>          value: app-a</span><span class=w>        
</span></span></span><span class=line><span class=ln>43</span><span class=cl><span class=w>      </span><span class=nt>target</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>44</span><span class=cl><span class=w>        </span><span class=nt>group</span><span class=p>:</span><span class=w> </span><span class=l>kustomize.toolkit.fluxcd.io</span><span class=w>
</span></span></span><span class=line><span class=ln>45</span><span class=cl><span class=w>        </span><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=l>v1beta2</span><span class=w>
</span></span></span><span class=line><span class=ln>46</span><span class=cl><span class=w>        </span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Kustomization</span><span class=w>
</span></span></span><span class=line><span class=ln>47</span><span class=cl><span class=w>    </span>- <span class=nt>patch</span><span class=p>:</span><span class=w> </span><span class=p>|-</span><span class=sd>
</span></span></span><span class=line><span class=ln>48</span><span class=cl><span class=sd>        - op: replace
</span></span></span><span class=line><span class=ln>49</span><span class=cl><span class=sd>          path: /namespace
</span></span></span><span class=line><span class=ln>50</span><span class=cl><span class=sd>          value: app-a</span><span class=w>        
</span></span></span><span class=line><span class=ln>51</span><span class=cl><span class=w>      </span><span class=nt>target</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>52</span><span class=cl><span class=w>        </span><span class=nt>group</span><span class=p>:</span><span class=w> </span><span class=l>kustomize.config.k8s.io</span><span class=w>
</span></span></span><span class=line><span class=ln>53</span><span class=cl><span class=w>        </span><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=l>v1beta1</span><span class=w>
</span></span></span><span class=line><span class=ln>54</span><span class=cl><span class=w>        </span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Kustomization</span><span class=w>
</span></span></span></code></pre></div><p>应用 <code>app-a</code> 团队将自助的通过<strong>独立</strong>的应用 <a href=https://github.com/zxkane/eks-gitops-app-a>GitOps 仓库</a>持续发布团队的应用。
如下示例 <code>app-a</code> 在其自助的 Git 仓库通过 <a href=https://github.com/zxkane/eks-gitops-app-a/blob/main/base/prestashop.yaml><code>HelmRelease</code> 部署了 Web 应用</a>。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=ln> 1</span><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>helm.toolkit.fluxcd.io/v2beta1</span><span class=w>
</span></span></span><span class=line><span class=ln> 2</span><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>HelmRelease</span><span class=w>
</span></span></span><span class=line><span class=ln> 3</span><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 4</span><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>prestashop</span><span class=w>
</span></span></span><span class=line><span class=ln> 5</span><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 6</span><span class=cl><span class=w>  </span><span class=nt>releaseName</span><span class=p>:</span><span class=w> </span><span class=l>prestashop</span><span class=w>
</span></span></span><span class=line><span class=ln> 7</span><span class=cl><span class=w>  </span><span class=nt>chart</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 8</span><span class=cl><span class=w>    </span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 9</span><span class=cl><span class=w>      </span><span class=nt>chart</span><span class=p>:</span><span class=w> </span><span class=l>prestashop</span><span class=w>
</span></span></span><span class=line><span class=ln>10</span><span class=cl><span class=w>      </span><span class=nt>sourceRef</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>11</span><span class=cl><span class=w>        </span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>HelmRepository</span><span class=w>
</span></span></span><span class=line><span class=ln>12</span><span class=cl><span class=w>        </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>bitnami</span><span class=w>
</span></span></span><span class=line><span class=ln>13</span><span class=cl><span class=w>        </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class=l>app-a</span><span class=w>
</span></span></span><span class=line><span class=ln>14</span><span class=cl><span class=w>      </span><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=m>14.0.10</span><span class=w>
</span></span></span><span class=line><span class=ln>15</span><span class=cl><span class=w>  </span><span class=nt>values</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>16</span><span class=cl><span class=w>    </span><span class=nt>existingSecret</span><span class=p>:</span><span class=w> </span><span class=l>prestashop</span><span class=w>
</span></span></span><span class=line><span class=ln>17</span><span class=cl><span class=w>    </span><span class=nt>service</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>18</span><span class=cl><span class=w>      </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>ClusterIP</span><span class=w>
</span></span></span><span class=line><span class=ln>19</span><span class=cl><span class=w>    </span><span class=nt>ingress</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>20</span><span class=cl><span class=w>      </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=ln>21</span><span class=cl><span class=w>      </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;/*&#39;</span><span class=w>
</span></span></span><span class=line><span class=ln>22</span><span class=cl><span class=w>      </span><span class=nt>annotations</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>23</span><span class=cl><span class=w>        </span><span class=nt>alb.ingress.kubernetes.io/scheme</span><span class=p>:</span><span class=w> </span><span class=l>internet-facing</span><span class=w>
</span></span></span><span class=line><span class=ln>24</span><span class=cl><span class=w>        </span><span class=nt>alb.ingress.kubernetes.io/inbound-cidrs</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;0.0.0.0/0&#39;</span><span class=w>
</span></span></span><span class=line><span class=ln>25</span><span class=cl><span class=w>        </span><span class=nt>alb.ingress.kubernetes.io/auth-type</span><span class=p>:</span><span class=w> </span><span class=l>none</span><span class=w>
</span></span></span><span class=line><span class=ln>26</span><span class=cl><span class=w>        </span><span class=nt>alb.ingress.kubernetes.io/target-type</span><span class=p>:</span><span class=w> </span><span class=l>ip</span><span class=w>
</span></span></span><span class=line><span class=ln>27</span><span class=cl><span class=w>        </span><span class=nt>kubernetes.io/ingress.class</span><span class=p>:</span><span class=w> </span><span class=l>alb</span><span class=w>
</span></span></span><span class=line><span class=ln>28</span><span class=cl><span class=w>        </span><span class=nt>alb.ingress.kubernetes.io/ssl-policy</span><span class=p>:</span><span class=w> </span><span class=l>ELBSecurityPolicy-TLS-1-2-Ext-2018-06</span><span class=w>
</span></span></span><span class=line><span class=ln>29</span><span class=cl><span class=w>        </span><span class=nt>alb.ingress.kubernetes.io/listen-ports</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;[{&#34;HTTP&#34;: 80}]&#39;</span><span class=w>
</span></span></span><span class=line><span class=ln>30</span><span class=cl><span class=w>        </span><span class=nt>alb.ingress.kubernetes.io/backend-protocol</span><span class=p>:</span><span class=w> </span><span class=l>HTTP</span><span class=w>
</span></span></span><span class=line><span class=ln>31</span><span class=cl><span class=w>        </span><span class=nt>alb.ingress.kubernetes.io/healthcheck-path</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;/&#39;</span><span class=w>
</span></span></span><span class=line><span class=ln>32</span><span class=cl><span class=w>    </span><span class=nt>persistence</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>33</span><span class=cl><span class=w>      </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=w>
</span></span></span><span class=line><span class=ln>34</span><span class=cl><span class=w>      </span><span class=nt>storageClass</span><span class=p>:</span><span class=w> </span><span class=l>gp2</span><span class=w>
</span></span></span><span class=line><span class=ln>35</span><span class=cl><span class=w>    </span><span class=c># for mariadb</span><span class=w>
</span></span></span><span class=line><span class=ln>36</span><span class=cl><span class=w>    </span><span class=nt>mariadb</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>37</span><span class=cl><span class=w>      </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=w>
</span></span></span><span class=line><span class=ln>38</span><span class=cl><span class=w>    </span><span class=nt>externalDatabase</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>39</span><span class=cl><span class=w>      </span><span class=nt>host</span><span class=p>:</span><span class=w> </span><span class=l>mariadb.kube-system.svc.cluster.local</span><span class=w>
</span></span></span><span class=line><span class=ln>40</span><span class=cl><span class=w>      </span><span class=nt>user</span><span class=p>:</span><span class=w> </span><span class=l>prestashop</span><span class=w>
</span></span></span><span class=line><span class=ln>41</span><span class=cl><span class=w>      </span><span class=nt>database</span><span class=p>:</span><span class=w> </span><span class=l>prestashop</span><span class=w>
</span></span></span><span class=line><span class=ln>42</span><span class=cl><span class=w>      </span><span class=nt>existingSecret</span><span class=p>:</span><span class=w> </span><span class=l>prestashop-db-secrets</span><span class=w>
</span></span></span><span class=line><span class=ln>43</span><span class=cl><span class=w>    </span><span class=nt>allowEmptyPassword</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=w>
</span></span></span><span class=line><span class=ln>44</span><span class=cl><span class=w>  </span><span class=nt>interval</span><span class=p>:</span><span class=w> </span><span class=l>1h0m0s</span><span class=w>
</span></span></span><span class=line><span class=ln>45</span><span class=cl><span class=w>  </span><span class=nt>install</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>46</span><span class=cl><span class=w>    </span><span class=nt>remediation</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>47</span><span class=cl><span class=w>      </span><span class=nt>retries</span><span class=p>:</span><span class=w> </span><span class=m>3</span><span class=w>
</span></span></span></code></pre></div><h2 id=五自动发布镜像更新>五、自动发布镜像更新</h2><p>在本节实践中我们将使用 <a href=https://github.com/microservices-demo/microservices-demo>Sock Shop</a>（一个使用 Spring Boot, Go kit, Node.js 容器化的微服务示例应用）。
同在第三，第四章节配置应用 <code>app-a</code> 一样，为 <code>sock-shop</code> 应用在 infrastructure GitOps 仓库中创建了单独的命名空间、RBAC、独立的 Git 仓库来管理应用的发布，
具体实现可参考 <a href=https://github.com/zxkane/eks-gitops/commit/67ae5a74069d51f5a38ea2e5e7322932543db9b3>commit1</a>, <a href=https://github.com/zxkane/eks-gitops/commit/abbcb3c1326e546f2b5dcbda8c68815d76d0a22e>commit2</a>。</p><h3 id=1-部署微服务应用程序-sock-shop>1. 部署微服务应用程序 Sock Shop</h3><p>在我们分叉的 <a href=https://github.com/microservices-demo/microservices-demo>Sock Shop</a> 通过 <a href=https://github.com/zxkane/microservices-demo/blob/gitops/deploy/kubernetes/base/kustomization.yaml>Kustomization 实现</a>了多集群部署的支持，
同时将 <strong>front-end</strong> 服务通过 <code>LoadBalancer</code> 类型对外暴露出来，利用 Amazon EKS 同 <a href=https://aws.amazon.com/elasticloadbalancing/>Amazon Elastic Load Balancing</a>
的集成来负载均衡 Sock Shop 应用的入口 <strong>front-end</strong> 服务。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=ln> 1</span><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>kustomize.config.k8s.io/v1beta1</span><span class=w>
</span></span></span><span class=line><span class=ln> 2</span><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Kustomization</span><span class=w>
</span></span></span><span class=line><span class=ln> 3</span><span class=cl><span class=w></span><span class=nt>resources</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 4</span><span class=cl><span class=w>  </span>- <span class=l>./complete-demo.yaml</span><span class=w>
</span></span></span><span class=line><span class=ln> 5</span><span class=cl><span class=w></span><span class=nt>patchesStrategicMerge</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 6</span><span class=cl><span class=w>  </span>- <span class=l>delete-ns.yaml  </span><span class=w>
</span></span></span><span class=line><span class=ln> 7</span><span class=cl><span class=w></span><span class=nt>patches</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=ln> 8</span><span class=cl><span class=w>  </span>- <span class=nt>patch</span><span class=p>:</span><span class=w> </span><span class=p>|-</span><span class=sd>
</span></span></span><span class="line hl"><span class=ln> 9</span><span class=cl><span class=sd>      - op: replace
</span></span></span><span class="line hl"><span class=ln>10</span><span class=cl><span class=sd>        path: /spec/type
</span></span></span><span class="line hl"><span class=ln>11</span><span class=cl><span class=sd>        value: LoadBalancer
</span></span></span><span class="line hl"><span class=ln>12</span><span class=cl><span class=sd>      - op: replace
</span></span></span><span class="line hl"><span class=ln>13</span><span class=cl><span class=sd>        path: /metadata/annotations/service.beta.kubernetes.io~1aws-load-balancer-type
</span></span></span><span class="line hl"><span class=ln>14</span><span class=cl><span class=sd>        value: external
</span></span></span><span class="line hl"><span class=ln>15</span><span class=cl><span class=sd>      - op: replace
</span></span></span><span class="line hl"><span class=ln>16</span><span class=cl><span class=sd>        path: /metadata/annotations/service.beta.kubernetes.io~1aws-load-balancer-nlb-target-type
</span></span></span><span class="line hl"><span class=ln>17</span><span class=cl><span class=sd>        value: ip
</span></span></span><span class="line hl"><span class=ln>18</span><span class=cl><span class=sd>      - op: replace
</span></span></span><span class="line hl"><span class=ln>19</span><span class=cl><span class=sd>        path: /metadata/annotations/service.beta.kubernetes.io~1aws-load-balancer-scheme
</span></span></span><span class="line hl"><span class=ln>20</span><span class=cl><span class=sd>        value: internet-facing</span><span class=w>      
</span></span></span><span class="line hl"><span class=ln>21</span><span class=cl><span class=w>    </span><span class=nt>target</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=ln>22</span><span class=cl><span class=w>      </span><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=l>v1</span><span class=w>
</span></span></span><span class="line hl"><span class=ln>23</span><span class=cl><span class=w>      </span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Service</span><span class=w>
</span></span></span><span class="line hl"><span class=ln>24</span><span class=cl><span class=w>      </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>front-end</span><span class=w>
</span></span></span></code></pre></div><p>通过定制化 <strong>front-end</strong> 微服务为我们的 Sock Shop 应用持续改进，最新的 <strong>front-end</strong>
通过自动化测试后打包的镜像版本通过 <a href=https://github.com/zxkane/front-end/pkgs/container/weaveworksdemos%2Ffront-end>Github packages</a> 容器镜像仓库对外发布。
我们在 <code>DEV</code> 环境将使用 Kustomization overlays 将 <strong>front-end</strong> 微服务替换为定制化更新的版本。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=ln> 1</span><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>kustomize.config.k8s.io/v1beta1</span><span class=w>
</span></span></span><span class=line><span class=ln> 2</span><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Kustomization</span><span class=w>
</span></span></span><span class=line><span class=ln> 3</span><span class=cl><span class=w></span><span class=nt>resources</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 4</span><span class=cl><span class=w>  </span>- <span class=l>../../base</span><span class=w>
</span></span></span><span class=line><span class=ln> 5</span><span class=cl><span class=w></span><span class=nt>patches</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 6</span><span class=cl><span class=w>  </span>- <span class=nt>patch</span><span class=p>:</span><span class=w> </span><span class=p>|-</span><span class=sd>
</span></span></span><span class=line><span class=ln> 7</span><span class=cl><span class=sd>      - op: replace
</span></span></span><span class=line><span class=ln> 8</span><span class=cl><span class=sd>        path: /metadata/annotations/external-dns.alpha.kubernetes.io~1hostname
</span></span></span><span class=line><span class=ln> 9</span><span class=cl><span class=sd>        value: socks-dev.test.kane.mx</span><span class=w>      
</span></span></span><span class=line><span class=ln>10</span><span class=cl><span class=w>    </span><span class=nt>target</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>11</span><span class=cl><span class=w>      </span><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=l>v1</span><span class=w>
</span></span></span><span class=line><span class=ln>12</span><span class=cl><span class=w>      </span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Service</span><span class=w>
</span></span></span><span class=line><span class=ln>13</span><span class=cl><span class=w>      </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>front-end</span><span class=w>
</span></span></span><span class="line hl"><span class=ln>14</span><span class=cl><span class=w></span><span class=nt>images</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=ln>15</span><span class=cl><span class=w></span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>weaveworksdemos/front-end</span><span class=w>
</span></span></span><span class="line hl"><span class=ln>16</span><span class=cl><span class=w>  </span><span class=nt>newName</span><span class=p>:</span><span class=w> </span><span class=l>ghcr.io/zxkane/weaveworksdemos/front-end</span><span class=w>
</span></span></span><span class="line hl"><span class=ln>17</span><span class=cl><span class=w>  </span><span class=nt>newTag</span><span class=p>:</span><span class=w> </span><span class=m>0.3.13</span>-<span class=l>rc0</span><span class=w>
</span></span></span></code></pre></div><p>在 <code>DEV</code> 等可持续集成的敏捷环境，在构建新服务镜像且发布后，通过人工或脚本更新 GitOps 代码仓库显得过于繁琐。
Flux 自身提供了完善且强大的 <a href=https://fluxcd.io/docs/guides/image-update/>Git 仓库镜像自动升级</a>功能。下面在我们的 GitOps 部署仓库来实现该能力。</p><div class="notices info"><div class=label>注意</div><p>镜像自动更新功能需要确保 Flux 在安装配置时已启用镜像自动更新组件。如未启用，可重复 <strong>bootstrap</strong> Flux 时加上
<code>--components-extra=image-reflector-controller,image-automation-controller</code> 参数来启用。</p></div><h3 id=2-注册-front-end-微服务的镜像仓库ghcr-front-end>2. 注册 <code>front-end</code> 微服务的<a href=https://github.com/zxkane/front-end/pkgs/container/weaveworksdemos%2Ffront-end>镜像仓库</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=ln>1</span><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>image.toolkit.fluxcd.io/v1beta1</span><span class=w>
</span></span></span><span class=line><span class=ln>2</span><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>ImageRepository</span><span class=w>
</span></span></span><span class=line><span class=ln>3</span><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>4</span><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>sock-shop-front-end</span><span class=w>
</span></span></span><span class=line><span class=ln>5</span><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>6</span><span class=cl><span class=w>  </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>ghcr.io/zxkane/weaveworksdemos/front-end</span><span class=w>
</span></span></span><span class=line><span class=ln>7</span><span class=cl><span class=w>  </span><span class=nt>interval</span><span class=p>:</span><span class=w> </span><span class=l>1m0s</span><span class=w>
</span></span></span></code></pre></div><h3 id=3-设置镜像更新策略>3. 设置镜像更新策略</h3><p>如下规则 <code>^0.3.x-0</code> 将匹配 <code>0.3.13-rc0</code>, <code>0.3.13-rc1</code>, <code>0.3.13</code> 等镜像版本。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=ln> 1</span><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>image.toolkit.fluxcd.io/v1beta1</span><span class=w>
</span></span></span><span class=line><span class=ln> 2</span><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>ImagePolicy</span><span class=w>
</span></span></span><span class=line><span class=ln> 3</span><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 4</span><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>sock-shop-front-end</span><span class=w>
</span></span></span><span class=line><span class=ln> 5</span><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 6</span><span class=cl><span class=w>  </span><span class=nt>imageRepositoryRef</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 7</span><span class=cl><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>sock-shop-front-end</span><span class=w>
</span></span></span><span class="line hl"><span class=ln> 8</span><span class=cl><span class=w>  </span><span class=nt>policy</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=ln> 9</span><span class=cl><span class=w>    </span><span class=nt>semver</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=ln>10</span><span class=cl><span class=w>      </span><span class=nt>range</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;^0.3.x-0&#39;</span><span class=w>
</span></span></span></code></pre></div><h3 id=4-创建自动镜像更新配置>4. 创建自动镜像更新配置</h3><p>Flux 自动镜像配置会指定应用配置的 Git 仓库，包括分支、路径等信息。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=ln> 1</span><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>image.toolkit.fluxcd.io/v1beta1</span><span class=w>
</span></span></span><span class=line><span class=ln> 2</span><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>ImageUpdateAutomation</span><span class=w>
</span></span></span><span class=line><span class=ln> 3</span><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 4</span><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>sock-shop-front-end</span><span class=w>
</span></span></span><span class=line><span class=ln> 5</span><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=ln> 6</span><span class=cl><span class=w>  </span><span class=nt>git</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=ln> 7</span><span class=cl><span class=w>    </span><span class=nt>checkout</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=ln> 8</span><span class=cl><span class=w>      </span><span class=nt>ref</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=ln> 9</span><span class=cl><span class=w>        </span><span class=nt>branch</span><span class=p>:</span><span class=w> </span><span class=l>gitops</span><span class=w>
</span></span></span><span class="line hl"><span class=ln>10</span><span class=cl><span class=w>    </span><span class=nt>commit</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=ln>11</span><span class=cl><span class=w>      </span><span class=nt>author</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=ln>12</span><span class=cl><span class=w>        </span><span class=nt>email</span><span class=p>:</span><span class=w> </span><span class=l>fluxcdbot@users.noreply.github.com</span><span class=w>
</span></span></span><span class="line hl"><span class=ln>13</span><span class=cl><span class=w>        </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>fluxcdbot</span><span class=w>
</span></span></span><span class="line hl"><span class=ln>14</span><span class=cl><span class=w>      </span><span class=nt>messageTemplate</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;{{range .Updated.Images}}{{println .}}{{end}}&#39;</span><span class=w>
</span></span></span><span class="line hl"><span class=ln>15</span><span class=cl><span class=w>    </span><span class=nt>push</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=ln>16</span><span class=cl><span class=w>      </span><span class=nt>branch</span><span class=p>:</span><span class=w> </span><span class=l>gitops</span><span class=w>
</span></span></span><span class=line><span class=ln>17</span><span class=cl><span class=w>  </span><span class=nt>interval</span><span class=p>:</span><span class=w> </span><span class=l>1m0s</span><span class=w>
</span></span></span><span class="line hl"><span class=ln>18</span><span class=cl><span class=w>  </span><span class=nt>sourceRef</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=ln>19</span><span class=cl><span class=w>    </span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>GitRepository</span><span class=w>
</span></span></span><span class="line hl"><span class=ln>20</span><span class=cl><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>sock-shop-tenant</span><span class=w>
</span></span></span><span class="line hl"><span class=ln>21</span><span class=cl><span class=w>    </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class=l>sock-shop</span><span class=w>
</span></span></span><span class=line><span class=ln>22</span><span class=cl><span class=w>  </span><span class=nt>update</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>23</span><span class=cl><span class=w>    </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=l>./deploy/kubernetes/overlays/development</span><span class=w>
</span></span></span><span class=line><span class=ln>24</span><span class=cl><span class=w>    </span><span class=nt>strategy</span><span class=p>:</span><span class=w> </span><span class=l>Setters</span><span class=w>
</span></span></span></code></pre></div><h3 id=5-为应用-gitops-仓库配置读写凭证>5. 为应用 GitOps 仓库配置读写凭证</h3><p>由于 Flux 需要将更新后的镜像版本信息提交回应用仓库，需要为 Flux 中配置的应用 <code>GitRepository</code> 指定<strong>可读写</strong>的访问凭证。
下面提供参考步骤创建 Git 仓库访问凭证并配置。</p><h4 id=1-创建-sealed-secret-保存-git-仓库读写权限的私钥>1. 创建 Sealed Secret 保存 Git 仓库读写权限的私钥</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>kubectl -n sock-shop create secret generic flux-image-automation <span class=se>\
</span></span></span><span class=line><span class=ln>2</span><span class=cl><span class=se></span>--from-file<span class=o>=</span><span class=nv>identity</span><span class=o>=</span>/path/gitops-image-update-id-ecdsa <span class=se>\
</span></span></span><span class=line><span class=ln>3</span><span class=cl><span class=se></span>--from-file<span class=o>=</span>identity.pub<span class=o>=</span>/path/gitops-image-update-id-ecdsa.pub <span class=se>\ </span><span class=c1># 确保此公钥已配置在 Git 仓库且具有读写权限，如 Github 仓库的 `Deploy Keys`</span>
</span></span><span class=line><span class=ln>4</span><span class=cl>--from-literal<span class=o>=</span><span class=nv>known_hosts</span><span class=o>=</span><span class=s2>&#34;github.com ecdsa-sha2-nistp256 AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBEmKSENjQEezOmxkZMy7opKgwFB9nkt5YRrYMjNuG5N87uRgg6CLrbo5wAdT/y6v0mKV0U2w0WZ2YB/++Tpockg=&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=ln>5</span><span class=cl><span class=se></span>--dry-run<span class=o>=</span>client <span class=se>\
</span></span></span><span class=line><span class=ln>6</span><span class=cl><span class=se></span>-o yaml &gt; flux-image-automation-secrets.yaml
</span></span><span class=line><span class=ln>7</span><span class=cl>
</span></span><span class=line><span class=ln>8</span><span class=cl>kubeseal --format<span class=o>=</span>yaml --cert<span class=o>=</span>pub-sealed-secrets-dev.pem <span class=se>\ </span>   
</span></span><span class=line><span class=ln>9</span><span class=cl>&lt; flux-image-automation-secrets.yaml &gt; ./apps/overlays/development/sock-shop/sealed-git-token.yaml 
</span></span></code></pre></div><h4 id=2-通过-kustomize-为-dev-环境的-gitrepository-配置指定访问凭证>2. 通过 Kustomize 为 <code>DEV</code> 环境的 <code>GitRepository</code> 配置指定访问凭证</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=ln> 1</span><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>kustomize.config.k8s.io/v1beta1</span><span class=w>
</span></span></span><span class=line><span class=ln> 2</span><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Kustomization</span><span class=w>
</span></span></span><span class=line><span class=ln> 3</span><span class=cl><span class=w></span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class=l>sock-shop</span><span class=w>
</span></span></span><span class=line><span class=ln> 4</span><span class=cl><span class=w></span><span class=nt>resources</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 5</span><span class=cl><span class=w>  </span>- <span class=l>../../../base/sock-shop</span><span class=w>
</span></span></span><span class="line hl"><span class=ln> 6</span><span class=cl><span class=w>  </span>- <span class=l>./sealed-slack-secrets.yaml</span><span class=w>
</span></span></span><span class="line hl"><span class=ln> 7</span><span class=cl><span class=w>  </span>- <span class=l>./sealed-git-token.yaml</span><span class=w>
</span></span></span><span class="line hl"><span class=ln> 8</span><span class=cl><span class=w>  </span>- <span class=l>./registry.yaml</span><span class=w>
</span></span></span><span class="line hl"><span class=ln> 9</span><span class=cl><span class=w>  </span>- <span class=l>./policy.yaml</span><span class=w>
</span></span></span><span class="line hl"><span class=ln>10</span><span class=cl><span class=w>  </span>- <span class=l>./image-automation.yaml</span><span class=w>
</span></span></span><span class=line><span class=ln>11</span><span class=cl><span class=w></span><span class=nt>patches</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>12</span><span class=cl><span class=w>  </span>- <span class=nt>patch</span><span class=p>:</span><span class=w> </span><span class=p>|-</span><span class=sd>
</span></span></span><span class=line><span class=ln>13</span><span class=cl><span class=sd>      - op: replace
</span></span></span><span class=line><span class=ln>14</span><span class=cl><span class=sd>        path: /spec/path
</span></span></span><span class=line><span class=ln>15</span><span class=cl><span class=sd>        value: ./deploy/kubernetes/overlays/development</span><span class=w>      
</span></span></span><span class=line><span class=ln>16</span><span class=cl><span class=w>    </span><span class=nt>target</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>17</span><span class=cl><span class=w>      </span><span class=nt>group</span><span class=p>:</span><span class=w> </span><span class=l>kustomize.toolkit.fluxcd.io</span><span class=w>
</span></span></span><span class=line><span class=ln>18</span><span class=cl><span class=w>      </span><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=l>v1beta2</span><span class=w>
</span></span></span><span class=line><span class=ln>19</span><span class=cl><span class=w>      </span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Kustomization</span><span class=w>
</span></span></span><span class=line><span class=ln>20</span><span class=cl><span class=w>      </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>sock-shop-tenant</span><span class=w>
</span></span></span><span class=line><span class=ln>21</span><span class=cl><span class=w>  </span>- <span class=nt>patch</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class=line><span class=ln>22</span><span class=cl><span class=sd>      - op: replace
</span></span></span><span class=line><span class=ln>23</span><span class=cl><span class=sd>        path: /spec/channel
</span></span></span><span class=line><span class=ln>24</span><span class=cl><span class=sd>        value: gitops-flux</span><span class=w>      
</span></span></span><span class=line><span class=ln>25</span><span class=cl><span class=w>    </span><span class=nt>target</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>26</span><span class=cl><span class=w>      </span><span class=nt>group</span><span class=p>:</span><span class=w> </span><span class=l>notification.toolkit.fluxcd.io</span><span class=w>
</span></span></span><span class=line><span class=ln>27</span><span class=cl><span class=w>      </span><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=l>v1beta1</span><span class=w>
</span></span></span><span class=line><span class=ln>28</span><span class=cl><span class=w>      </span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Provider</span><span class=w>
</span></span></span><span class=line><span class=ln>29</span><span class=cl><span class=w>      </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>slack</span><span class=w>
</span></span></span><span class="line hl"><span class=ln>30</span><span class=cl><span class=w>  </span>- <span class=nt>patch</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class="line hl"><span class=ln>31</span><span class=cl><span class=sd>      - op: replace
</span></span></span><span class="line hl"><span class=ln>32</span><span class=cl><span class=sd>        path: /spec/url
</span></span></span><span class="line hl"><span class=ln>33</span><span class=cl><span class=sd>        value: git@github.com:zxkane/microservices-demo.git
</span></span></span><span class="line hl"><span class=ln>34</span><span class=cl><span class=sd>      - op: replace
</span></span></span><span class="line hl"><span class=ln>35</span><span class=cl><span class=sd>        path: /spec/secretRef
</span></span></span><span class="line hl"><span class=ln>36</span><span class=cl><span class=sd>        value: {}
</span></span></span><span class="line hl"><span class=ln>37</span><span class=cl><span class=sd>      - op: replace
</span></span></span><span class="line hl"><span class=ln>38</span><span class=cl><span class=sd>        path: /spec/secretRef/name
</span></span></span><span class="line hl"><span class=ln>39</span><span class=cl><span class=sd>        value: flux-image-automation</span><span class=w>      
</span></span></span><span class="line hl"><span class=ln>40</span><span class=cl><span class=w>    </span><span class=nt>target</span><span class=p>:</span><span class=w>
</span></span></span><span class="line hl"><span class=ln>41</span><span class=cl><span class=w>      </span><span class=nt>group</span><span class=p>:</span><span class=w> </span><span class=l>source.toolkit.fluxcd.io</span><span class=w>
</span></span></span><span class="line hl"><span class=ln>42</span><span class=cl><span class=w>      </span><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=l>v1beta1</span><span class=w>
</span></span></span><span class="line hl"><span class=ln>43</span><span class=cl><span class=w>      </span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>GitRepository</span><span class=w>
</span></span></span><span class="line hl"><span class=ln>44</span><span class=cl><span class=w>      </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>sock-shop-tenant  </span><span class=w>
</span></span></span></code></pre></div><h3 id=6-验证镜像自动更新>6. 验证镜像自动更新</h3><p>更新微服务 <code>front-end</code> 代码且<strong>tag</strong>版本后，新的镜像版本被发布到<a href=https://github.com/zxkane/front-end/pkgs/container/weaveworksdemos%2Ffront-end>镜像仓库</a>。
通过前面配置的 <code>ImageRepository</code> 和 <code>ImagePolicy</code> 扫描到 <code>front-end</code> 镜像符合策略的新版本发布，
根据 <code>ImageUpdateAutomation</code> 配置的 <a href=https://github.com/zxkane/microservices-demo>Sock Shop 应用仓库</a>，查找指定的镜像变量，
Flux 的 <code>image-automation-controller</code> 自动将<a href=https://github.com/zxkane/microservices-demo/commit/adc652eee462a7db9df1388a9be5fb5dc73626b2>更新的镜像信息提交到应用仓库</a>实现持续部署。</p><p><figure><picture><source srcset=/posts/gitops/flux-in-action-2/flux-image-automation-update-event.avif type=image/avif><source srcset=/posts/gitops/flux-in-action-2/flux-image-automation-update-event.webp type=image/webp><img loading=lazy decoding=async alt=镜像自动更新消息通知 class="image_figure image_internal image_processed" width=1000 height=585 src=https://kane.mx/posts/gitops/flux-in-action-2/flux-image-automation-update-event.jpg title=图1：镜像自动更新消息通知><figcaption class="caption_figure caption_internal">图1：镜像自动更新消息通知</figcaption></picture></figure></p><h2 id=六小结及展望>六、小结及展望</h2><p>本文介绍了如何使用 GitOps 工具 FluxCD v2 构建企业内部在 Kubernetes 上持续交付共享服务平台，
将平台团队和应用/业务团队统一在同样的 Git 工作流程下，同时授权应用/业务团队用自服务的方式持续交付应用的敏捷部署。
此方案将<strong>安全</strong>和<strong>效率</strong>有效的结合在一起。前述的示例可在<a href=https://github.com/zxkane/eks-gitops>此仓库</a>获取完整的 GitOps 代码。</p><p>同时面对复杂的企业场景，还有一些方面还可以持续的优化，例如，</p><ul><li>面对关键的线上生产系统，如何安全增量的灰度发布？</li><li>Sealed Secrets 引入了额外的私钥管理需求，在云计算环境<a href=/posts/gitops/manage-k8s-secrets-in-external-secrets-manager/>如何改善 GitOps 密钥的管理</a>？</li><li>如何将<a href=/posts/gitops/crossplane-meets-gitops/>云平台的资源 IaC 同 Kubernetes 内资源 GitOps 协同管理</a>？</li><li>如何更加高效的开发 Kubernetes manifests(YAML)？</li></ul><p>将在后续的文章中逐个探讨这些问题。</p></div><h2 class=post_related>Posts in this series</h2><ul><li><a href=https://kane.mx/posts/gitops/fluxcd-local-debug-tip/ class=nav-link title="FluxCD GitOps debugging tip">FluxCD GitOps debugging tip</a></li><li><a href=https://kane.mx/posts/gitops/manage-k8s-secrets-in-external-secrets-manager/ class=nav-link title="使用外部Secrets Manager管理Kubernetes密钥">使用外部Secrets Manager管理Kubernetes密钥</a></li><li><a href=https://kane.mx/posts/gitops/crossplane-meets-gitops/ class=nav-link title="基于 Flux 的 GitOps 管理 Crossplane 部署及资源">基于 Flux 的 GitOps 管理 Crossplane 部署及资源</a></li><li><a href=https://kane.mx/posts/gitops/flux-in-action-2/ class=nav-link title="基于 Flux 的 GitOps 实战（下）">基于 Flux 的 GitOps 实战（下）</a></li><li><a href=https://kane.mx/posts/gitops/flux-in-action-1/ class=nav-link title="基于 Flux 的 GitOps 实战（上）">基于 Flux 的 GitOps 实战（上）</a></li><li><a href=https://kane.mx/posts/gitops/the-best-practise-of-gitops-in-kubernetes/ class=nav-link title="Kuberentes 上 GitOps 最佳实践">Kuberentes 上 GitOps 最佳实践</a></li></ul><script src=https://giscus.app/client.js data-repo=zxkane/articles data-repo-id="MDEwOlJlcG9zaXRvcnkxNjM1OTcwMjc=" data-category=General data-category-id=DIC_kwDOCcBK484CSKCb data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=preferred_color_scheme data-lang=en crossorigin=anonymous async></script></article><aside class=sidebar><section class=sidebar_inner><br><div class=search><input type=search class="search_field form_field" placeholder=Search... id=find autocomplete=off data-scope=posts>
<label for=find class=search_label><svg class="icon"><title>search</title><use xlink:href="#search"/></svg></label><div class="search_results results"></div></div><div class=author_header><img src=https://kane.mx/img/favicon.ico alt="Kane Zhu photo"><h2>Kane Zhu</h2></div><div class=author_bio>Just a blog for personal experience or thoughts, mostly tech-related.</div><a href=https://kane.mx/about/ class="button mt-1" role=button title='Read More'>Read More</a><h2 class=mt-4>Posts in this series</h2><ul><li><a href=https://kane.mx/posts/gitops/fluxcd-local-debug-tip/ class=nav-link title="FluxCD GitOps debugging tip">FluxCD GitOps debugging tip</a></li><li><a href=https://kane.mx/posts/gitops/manage-k8s-secrets-in-external-secrets-manager/ class=nav-link title="使用外部Secrets Manager管理Kubernetes密钥">使用外部Secrets Manager管理Kubernetes密钥</a></li><li><a href=https://kane.mx/posts/gitops/crossplane-meets-gitops/ class=nav-link title="基于 Flux 的 GitOps 管理 Crossplane 部署及资源">基于 Flux 的 GitOps 管理 Crossplane 部署及资源</a></li><li><a href=https://kane.mx/posts/gitops/flux-in-action-2/ class=nav-link title="基于 Flux 的 GitOps 实战（下）">基于 Flux 的 GitOps 实战（下）</a></li><li><a href=https://kane.mx/posts/gitops/flux-in-action-1/ class=nav-link title="基于 Flux 的 GitOps 实战（上）">基于 Flux 的 GitOps 实战（上）</a></li><li><a href=https://kane.mx/posts/gitops/the-best-practise-of-gitops-in-kubernetes/ class=nav-link title="Kuberentes 上 GitOps 最佳实践">Kuberentes 上 GitOps 最佳实践</a></li></ul><h2 class=mt-4>Recent Posts</h2><ul class=flex-column><li><a href=https://kane.mx/posts/deep-dive-clickstream-analytics/pipeline-observability/ class=nav-link title="Deep Dive Clickstream Analytics Series: Data Pipeline Observability">Deep Dive Clickstream Analytics Series: Data Pipeline Observability</a></li><li><a href=https://kane.mx/posts/deep-dive-clickstream-analytics/report/ class=nav-link title="Deep Dive Clickstream Analytics Series: Reporting">Deep Dive Clickstream Analytics Series: Reporting</a></li><li><a href=https://kane.mx/posts/2024/cursor-meets-bedrock/ class=nav-link title="Using Amazon Bedrock as a Custom OpenAI Server Alternative in Cursor">Using Amazon Bedrock as a Custom OpenAI Server Alternative in Cursor</a></li><li><a href=https://kane.mx/posts/2024/alfred-integration-with-bedrock-claude/ class=nav-link title="Access Bedrock Claude 3/3.5 Models with Alfred OpenAI ChatGPT Workflow">Access Bedrock Claude 3/3.5 Models with Alfred OpenAI ChatGPT Workflow</a></li><li><a href=https://kane.mx/posts/deep-dive-clickstream-analytics/data-modeling/ class=nav-link title="Deep dive clickstream analytic series: Data Modeling">Deep dive clickstream analytic series: Data Modeling</a></li><li><a href=https://kane.mx/posts/deep-dive-clickstream-analytics/data-processing/ class=nav-link title="Deep dive clickstream analytic series: Data Processing">Deep dive clickstream analytic series: Data Processing</a></li><li><a href=https://kane.mx/posts/deep-dive-clickstream-analytics/data-ingestion/ class=nav-link title="Deep dive clickstream analytic series: Data Ingestion">Deep dive clickstream analytic series: Data Ingestion</a></li><li><a href=https://kane.mx/posts/deep-dive-clickstream-analytics/web-console/ class=nav-link title="Deep dive clickstream analytic series: Serverless web console">Deep dive clickstream analytic series: Serverless web console</a></li></ul><div><h2 class="mt-4 taxonomy" id=categories-section>Categories</h2><nav class=tags_nav><a href=https://kane.mx/categories/blogging/ class="post_tag button button_translucent" title=blogging>BLOGGING
<span class=button_tally>77</span>
</a><a href=https://kane.mx/categories/cloud-computing/ class="post_tag button button_translucent" title=cloud-computing>CLOUD-COMPUTING
<span class=button_tally>42</span>
</a><a href=https://kane.mx/categories/serverless-computing/ class="post_tag button button_translucent" title=serverless-computing>SERVERLESS-COMPUTING
<span class=button_tally>12</span>
</a><a href=https://kane.mx/categories/kubernetes/ class="post_tag button button_translucent" title=kubernetes>KUBERNETES
<span class=button_tally>10</span>
</a><a href=https://kane.mx/categories/trip/ class="post_tag button button_translucent" title=trip>TRIP
<span class=button_tally>5</span></a></nav></div><div><h2 class="mt-4 taxonomy" id=series-section>Series</h2><nav class=tags_nav><a href=https://kane.mx/series/build-serverless-application/ class="post_tag button button_translucent" title=build-serverless-application>BUILD-SERVERLESS-APPLICATION
<span class=button_tally>12</span>
</a><a href=https://kane.mx/series/effective-cloud-computing/ class="post_tag button button_translucent" title=effective-cloud-computing>EFFECTIVE-CLOUD-COMPUTING
<span class=button_tally>10</span>
</a><a href=https://kane.mx/series/clickstream-analytics/ class="post_tag button button_translucent" title=clickstream-analytics>CLICKSTREAM-ANALYTICS
<span class=button_tally>8</span>
</a><a href=https://kane.mx/series/gitops/ class="post_tag button button_translucent" title=gitops>GITOPS
<span class=button_tally>6</span>
</a><a href=https://kane.mx/series/amazon-builders-library/ class="post_tag button button_translucent" title=amazon-builders-library>AMAZON-BUILDERS-LIBRARY
<span class=button_tally>2</span></a></nav></div><div><h2 class="mt-4 taxonomy" id=tags-section>Tags</h2><nav class=tags_nav><a href=https://kane.mx/tags/aws/ class="post_tag button button_translucent" title=aws>AWS
<span class=button_tally>56</span>
</a><a href=https://kane.mx/tags/eclipse/ class="post_tag button button_translucent" title=eclipse>ECLIPSE
<span class=button_tally>21</span>
</a><a href=https://kane.mx/tags/aws-cdk/ class="post_tag button button_translucent" title="aws cdk">AWS CDK
<span class=button_tally>18</span>
</a><a href=https://kane.mx/tags/tip/ class="post_tag button button_translucent" title=tip>TIP
<span class=button_tally>17</span>
</a><a href=https://kane.mx/tags/%E4%BA%91%E8%AE%A1%E7%AE%97/ class="post_tag button button_translucent" title=云计算>云计算
<span class=button_tally>16</span>
</a><a href=https://kane.mx/tags/kubernetes/ class="post_tag button button_translucent" title=kubernetes>KUBERNETES
<span class=button_tally>14</span>
</a><a href=https://kane.mx/tags/equinox/ class="post_tag button button_translucent" title=equinox>EQUINOX
<span class=button_tally>10</span>
</a><a href=https://kane.mx/tags/git/ class="post_tag button button_translucent" title=git>GIT
<span class=button_tally>9</span>
</a><a href=https://kane.mx/tags/serverless/ class="post_tag button button_translucent" title=serverless>SERVERLESS
<span class=button_tally>9</span>
</a><a href=https://kane.mx/tags/serverless-computing/ class="post_tag button button_translucent" title="serverless computing">SERVERLESS COMPUTING
<span class=button_tally>9</span>
</a><a href=https://kane.mx/tags/aws-lambda/ class="post_tag button button_translucent" title="aws lambda">AWS LAMBDA
<span class=button_tally>8</span>
</a><a href=https://kane.mx/tags/clickstream-analytics/ class="post_tag button button_translucent" title="clickstream analytics">CLICKSTREAM ANALYTICS
<span class=button_tally>8</span>
</a><a href=https://kane.mx/tags/continuous-delivery/ class="post_tag button button_translucent" title="continuous delivery">CONTINUOUS DELIVERY
<span class=button_tally>7</span>
</a><a href=https://kane.mx/tags/devops/ class="post_tag button button_translucent" title=devops>DEVOPS
<span class=button_tally>7</span></a><br><div class="post_tags_toggle button">All Tags</div><div class=post_tags><div class=tags_list><a href=https://kane.mx/tags/alfred/ class="post_tag button button_translucent" data-position=1 title=alfred>ALFRED<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/alfred-workflow/ class="post_tag button button_translucent" data-position=1 title="alfred workflow">ALFRED WORKFLOW<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/aliyun/ class="post_tag button button_translucent" data-position=1 title=aliyun>ALIYUN<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/amazon-alexa/ class="post_tag button button_translucent" data-position=1 title="amazon alexa">AMAZON ALEXA<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/amazon-api-gateway/ class="post_tag button button_translucent" data-position=1 title="amazon api gateway">AMAZON API GATEWAY<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/amazon-athena/ class="post_tag button button_translucent" data-position=1 title="amazon athena">AMAZON ATHENA<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/amazon-bedrock/ class="post_tag button button_translucent" data-position=1 title="amazon bedrock">AMAZON BEDROCK<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/amazon-builders-library/ class="post_tag button button_translucent" data-position=2 title="amazon builders' library">AMAZON BUILDERS' LIBRARY<span class=button_tally>2</span>
</a><a href=https://kane.mx/tags/amazon-codewhisperer/ class="post_tag button button_translucent" data-position=1 title="amazon codewhisperer">AMAZON CODEWHISPERER<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/amazon-dynamodb/ class="post_tag button button_translucent" data-position=1 title="amazon dynamodb">AMAZON DYNAMODB<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/amazon-ecs/ class="post_tag button button_translucent" data-position=1 title="amazon ecs">AMAZON ECS<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/amazon-eks/ class="post_tag button button_translucent" data-position=2 title="amazon eks">AMAZON EKS<span class=button_tally>2</span>
</a><a href=https://kane.mx/tags/amazon-emr/ class="post_tag button button_translucent" data-position=1 title="amazon emr">AMAZON EMR<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/amazon-neptune/ class="post_tag button button_translucent" data-position=1 title="amazon neptune">AMAZON NEPTUNE<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/amazon-quicksight/ class="post_tag button button_translucent" data-position=1 title="amazon quicksight">AMAZON QUICKSIGHT<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/amazon-redshift/ class="post_tag button button_translucent" data-position=2 title="amazon redshift">AMAZON REDSHIFT<span class=button_tally>2</span>
</a><a href=https://kane.mx/tags/amazon-sqs/ class="post_tag button button_translucent" data-position=1 title="amazon sqs">AMAZON SQS<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/amazon-vpc/ class="post_tag button button_translucent" data-position=1 title="amazon vpc">AMAZON VPC<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/amplify/ class="post_tag button button_translucent" data-position=2 title=amplify>AMPLIFY<span class=button_tally>2</span>
</a><a href=https://kane.mx/tags/analysis/ class="post_tag button button_translucent" data-position=1 title=analysis>ANALYSIS<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/analytics/ class="post_tag button button_translucent" data-position=2 title=analytics>ANALYTICS<span class=button_tally>2</span>
</a><a href=https://kane.mx/tags/angularjs/ class="post_tag button button_translucent" data-position=1 title=angularjs>ANGULARJS<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/anthropic-claude/ class="post_tag button button_translucent" data-position=2 title="anthropic claude">ANTHROPIC CLAUDE<span class=button_tally>2</span>
</a><a href=https://kane.mx/tags/apache-spark/ class="post_tag button button_translucent" data-position=1 title="apache spark">APACHE SPARK<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/api-gateway/ class="post_tag button button_translucent" data-position=3 title="api gateway">API GATEWAY<span class=button_tally>3</span>
</a><a href=https://kane.mx/tags/architecture/ class="post_tag button button_translucent" data-position=1 title=architecture>ARCHITECTURE<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/archsummit/ class="post_tag button button_translucent" data-position=1 title=archsummit>ARCHSUMMIT<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/argocd/ class="post_tag button button_translucent" data-position=1 title=argocd>ARGOCD<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/athena/ class="post_tag button button_translucent" data-position=1 title=athena>ATHENA<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/athena-udf/ class="post_tag button button_translucent" data-position=1 title="athena udf">ATHENA UDF<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/authentication/ class="post_tag button button_translucent" data-position=2 title=authentication>AUTHENTICATION<span class=button_tally>2</span>
</a><a href=https://kane.mx/tags/authorization/ class="post_tag button button_translucent" data-position=1 title=authorization>AUTHORIZATION<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/aws/ class="post_tag button button_translucent" data-position=56 title=aws>AWS<span class=button_tally>56</span>
</a><a href=https://kane.mx/tags/aws-api-gateway/ class="post_tag button button_translucent" data-position=1 title="aws api gateway">AWS API GATEWAY<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/aws-athena/ class="post_tag button button_translucent" data-position=1 title="aws athena">AWS ATHENA<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/aws-cdk/ class="post_tag button button_translucent" data-position=18 title="aws cdk">AWS CDK<span class=button_tally>18</span>
</a><a href=https://kane.mx/tags/aws-cli/ class="post_tag button button_translucent" data-position=1 title="aws cli">AWS CLI<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/aws-cloudformation/ class="post_tag button button_translucent" data-position=3 title="aws cloudformation">AWS CLOUDFORMATION<span class=button_tally>3</span>
</a><a href=https://kane.mx/tags/aws-ecs/ class="post_tag button button_translucent" data-position=1 title="aws ecs">AWS ECS<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/aws-eks/ class="post_tag button button_translucent" data-position=2 title="aws eks">AWS EKS<span class=button_tally>2</span>
</a><a href=https://kane.mx/tags/aws-fargate/ class="post_tag button button_translucent" data-position=1 title="aws fargate">AWS FARGATE<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/aws-fault-injection-simulator/ class="post_tag button button_translucent" data-position=1 title="aws fault injection simulator">AWS FAULT INJECTION SIMULATOR<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/aws-fis/ class="post_tag button button_translucent" data-position=1 title="aws fis">AWS FIS<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/aws-js-sdk/ class="post_tag button button_translucent" data-position=1 title="aws js sdk">AWS JS SDK<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/aws-lambda/ class="post_tag button button_translucent" data-position=8 title="aws lambda">AWS LAMBDA<span class=button_tally>8</span>
</a><a href=https://kane.mx/tags/aws-s3/ class="post_tag button button_translucent" data-position=2 title="aws s3">AWS S3<span class=button_tally>2</span>
</a><a href=https://kane.mx/tags/aws-secrets-manager/ class="post_tag button button_translucent" data-position=1 title="aws secrets manager">AWS SECRETS MANAGER<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/aws-step-functions/ class="post_tag button button_translucent" data-position=1 title="aws step functions">AWS STEP FUNCTIONS<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/aws-toolkit/ class="post_tag button button_translucent" data-position=1 title="aws toolkit">AWS TOOLKIT<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/aws-vpn/ class="post_tag button button_translucent" data-position=1 title="aws vpn">AWS VPN<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/aws-ecr/ class="post_tag button button_translucent" data-position=1 title=aws-ecr>AWS-ECR<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/batch/ class="post_tag button button_translucent" data-position=1 title=batch>BATCH<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/big-data/ class="post_tag button button_translucent" data-position=1 title="big data">BIG DATA<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/build/ class="post_tag button button_translucent" data-position=2 title=build>BUILD<span class=button_tally>2</span>
</a><a href=https://kane.mx/tags/bundle/ class="post_tag button button_translucent" data-position=1 title=bundle>BUNDLE<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/business-intelligence/ class="post_tag button button_translucent" data-position=1 title="business intelligence">BUSINESS INTELLIGENCE<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/cd/ class="post_tag button button_translucent" data-position=6 title=cd>CD<span class=button_tally>6</span>
</a><a href=https://kane.mx/tags/cdk-construct/ class="post_tag button button_translucent" data-position=3 title="cdk construct">CDK CONSTRUCT<span class=button_tally>3</span>
</a><a href=https://kane.mx/tags/certificate/ class="post_tag button button_translucent" data-position=2 title=certificate>CERTIFICATE<span class=button_tally>2</span>
</a><a href=https://kane.mx/tags/chaos-engineering/ class="post_tag button button_translucent" data-position=1 title="chaos engineering">CHAOS ENGINEERING<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/chatgpt/ class="post_tag button button_translucent" data-position=2 title=chatgpt>CHATGPT<span class=button_tally>2</span>
</a><a href=https://kane.mx/tags/ci/ class="post_tag button button_translucent" data-position=1 title=ci>CI<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/clean-code/ class="post_tag button button_translucent" data-position=1 title="clean code">CLEAN CODE<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/clearcase/ class="post_tag button button_translucent" data-position=2 title=clearcase>CLEARCASE<span class=button_tally>2</span>
</a><a href=https://kane.mx/tags/clickstream-analytics/ class="post_tag button button_translucent" data-position=8 title="clickstream analytics">CLICKSTREAM ANALYTICS<span class=button_tally>8</span>
</a><a href=https://kane.mx/tags/cloud-native/ class="post_tag button button_translucent" data-position=1 title="cloud native">CLOUD NATIVE<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/cloudfront/ class="post_tag button button_translucent" data-position=1 title=cloudfront>CLOUDFRONT<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/code-signing/ class="post_tag button button_translucent" data-position=1 title="code signing">CODE SIGNING<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/codecommit/ class="post_tag button button_translucent" data-position=1 title=codecommit>CODECOMMIT<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/codepipeline/ class="post_tag button button_translucent" data-position=1 title=codepipeline>CODEPIPELINE<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/cognito/ class="post_tag button button_translucent" data-position=2 title=cognito>COGNITO<span class=button_tally>2</span>
</a><a href=https://kane.mx/tags/collections/ class="post_tag button button_translucent" data-position=1 title=collections>COLLECTIONS<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/compile/ class="post_tag button button_translucent" data-position=1 title=compile>COMPILE<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/configuration/ class="post_tag button button_translucent" data-position=2 title=configuration>CONFIGURATION<span class=button_tally>2</span>
</a><a href=https://kane.mx/tags/construct-hub/ class="post_tag button button_translucent" data-position=1 title="construct hub">CONSTRUCT HUB<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/container/ class="post_tag button button_translucent" data-position=1 title=container>CONTAINER<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/continuous-delivery/ class="post_tag button button_translucent" data-position=7 title="continuous delivery">CONTINUOUS DELIVERY<span class=button_tally>7</span>
</a><a href=https://kane.mx/tags/continuous-deployment/ class="post_tag button button_translucent" data-position=2 title="continuous deployment">CONTINUOUS DEPLOYMENT<span class=button_tally>2</span>
</a><a href=https://kane.mx/tags/cost/ class="post_tag button button_translucent" data-position=1 title=cost>COST<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/crossplane/ class="post_tag button button_translucent" data-position=1 title=crossplane>CROSSPLANE<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/cursor/ class="post_tag button button_translucent" data-position=1 title=cursor>CURSOR<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/daemon/ class="post_tag button button_translucent" data-position=1 title=daemon>DAEMON<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/data-lakes/ class="post_tag button button_translucent" data-position=1 title="data lakes">DATA LAKES<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/data-modeling/ class="post_tag button button_translucent" data-position=1 title="data modeling">DATA MODELING<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/data-processing/ class="post_tag button button_translucent" data-position=1 title="data processing">DATA PROCESSING<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/data-visualization/ class="post_tag button button_translucent" data-position=1 title="data visualization">DATA VISUALIZATION<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/debug/ class="post_tag button button_translucent" data-position=2 title=debug>DEBUG<span class=button_tally>2</span>
</a><a href=https://kane.mx/tags/debugging/ class="post_tag button button_translucent" data-position=1 title=debugging>DEBUGGING<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/development-tools/ class="post_tag button button_translucent" data-position=1 title="development tools">DEVELOPMENT TOOLS<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/devops/ class="post_tag button button_translucent" data-position=7 title=devops>DEVOPS<span class=button_tally>7</span>
</a><a href=https://kane.mx/tags/dingtalk/ class="post_tag button button_translucent" data-position=4 title=dingtalk>DINGTALK<span class=button_tally>4</span>
</a><a href=https://kane.mx/tags/django/ class="post_tag button button_translucent" data-position=1 title=django>DJANGO<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/docker/ class="post_tag button button_translucent" data-position=6 title=docker>DOCKER<span class=button_tally>6</span>
</a><a href=https://kane.mx/tags/docker-swarm/ class="post_tag button button_translucent" data-position=2 title=docker-swarm>DOCKER-SWARM<span class=button_tally>2</span>
</a><a href=https://kane.mx/tags/dual-monitor/ class="post_tag button button_translucent" data-position=1 title="dual monitor">DUAL MONITOR<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/dynamodb/ class="post_tag button button_translucent" data-position=1 title=dynamodb>DYNAMODB<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/eclipse/ class="post_tag button button_translucent" data-position=21 title=eclipse>ECLIPSE<span class=button_tally>21</span>
</a><a href=https://kane.mx/tags/edas/ class="post_tag button button_translucent" data-position=1 title=edas>EDAS<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/eks/ class="post_tag button button_translucent" data-position=4 title=eks>EKS<span class=button_tally>4</span>
</a><a href=https://kane.mx/tags/encoding/ class="post_tag button button_translucent" data-position=1 title=encoding>ENCODING<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/equinox/ class="post_tag button button_translucent" data-position=10 title=equinox>EQUINOX<span class=button_tally>10</span>
</a><a href=https://kane.mx/tags/external-secrets-operator/ class="post_tag button button_translucent" data-position=1 title="external secrets operator">EXTERNAL SECRETS OPERATOR<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/faas/ class="post_tag button button_translucent" data-position=6 title=faas>FAAS<span class=button_tally>6</span>
</a><a href=https://kane.mx/tags/feature/ class="post_tag button button_translucent" data-position=1 title=feature>FEATURE<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/filevault/ class="post_tag button button_translucent" data-position=1 title=filevault>FILEVAULT<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/firefox/ class="post_tag button button_translucent" data-position=1 title=firefox>FIREFOX<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/flux/ class="post_tag button button_translucent" data-position=6 title=flux>FLUX<span class=button_tally>6</span>
</a><a href=https://kane.mx/tags/gdb/ class="post_tag button button_translucent" data-position=1 title=gdb>GDB<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/gerrit/ class="post_tag button button_translucent" data-position=2 title=gerrit>GERRIT<span class=button_tally>2</span>
</a><a href=https://kane.mx/tags/git/ class="post_tag button button_translucent" data-position=9 title=git>GIT<span class=button_tally>9</span>
</a><a href=https://kane.mx/tags/github-actions/ class="post_tag button button_translucent" data-position=1 title="github actions">GITHUB ACTIONS<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/gitops/ class="post_tag button button_translucent" data-position=7 title=gitops>GITOPS<span class=button_tally>7</span>
</a><a href=https://kane.mx/tags/glue/ class="post_tag button button_translucent" data-position=1 title=glue>GLUE<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/graph-database/ class="post_tag button button_translucent" data-position=1 title="graph database">GRAPH DATABASE<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/groovy/ class="post_tag button button_translucent" data-position=1 title=groovy>GROOVY<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/helm/ class="post_tag button button_translucent" data-position=3 title=helm>HELM<span class=button_tally>3</span>
</a><a href=https://kane.mx/tags/howto/ class="post_tag button button_translucent" data-position=1 title=howto>HOWTO<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/iam/ class="post_tag button button_translucent" data-position=3 title=iam>IAM<span class=button_tally>3</span>
</a><a href=https://kane.mx/tags/ibm-notes/ class="post_tag button button_translucent" data-position=1 title="ibm notes">IBM NOTES<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/infrastructure-as-code/ class="post_tag button button_translucent" data-position=5 title="infrastructure as code">INFRASTRUCTURE AS CODE<span class=button_tally>5</span>
</a><a href=https://kane.mx/tags/intellij-ides/ class="post_tag button button_translucent" data-position=1 title="intellij ides">INTELLIJ IDES<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/istio/ class="post_tag button button_translucent" data-position=1 title=istio>ISTIO<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/java/ class="post_tag button button_translucent" data-position=5 title=java>JAVA<span class=button_tally>5</span>
</a><a href=https://kane.mx/tags/jenkins/ class="post_tag button button_translucent" data-position=3 title=jenkins>JENKINS<span class=button_tally>3</span>
</a><a href=https://kane.mx/tags/jenkins-cli/ class="post_tag button button_translucent" data-position=2 title=jenkins-cli>JENKINS-CLI<span class=button_tally>2</span>
</a><a href=https://kane.mx/tags/jetty/ class="post_tag button button_translucent" data-position=1 title=jetty>JETTY<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/jni/ class="post_tag button button_translucent" data-position=1 title=jni>JNI<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/jre/ class="post_tag button button_translucent" data-position=1 title=jre>JRE<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/kubernetes/ class="post_tag button button_translucent" data-position=14 title=kubernetes>KUBERNETES<span class=button_tally>14</span>
</a><a href=https://kane.mx/tags/lambda-web-adapter/ class="post_tag button button_translucent" data-position=1 title="lambda web adapter">LAMBDA WEB ADAPTER<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/linux/ class="post_tag button button_translucent" data-position=4 title=linux>LINUX<span class=button_tally>4</span>
</a><a href=https://kane.mx/tags/llm/ class="post_tag button button_translucent" data-position=2 title=llm>LLM<span class=button_tally>2</span>
</a><a href=https://kane.mx/tags/logging/ class="post_tag button button_translucent" data-position=1 title=logging>LOGGING<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/lucene/ class="post_tag button button_translucent" data-position=1 title=lucene>LUCENE<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/mac-osx/ class="post_tag button button_translucent" data-position=1 title="mac osx">MAC OSX<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/macos-monterey/ class="post_tag button button_translucent" data-position=1 title="macos monterey">MACOS MONTEREY<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/macosx/ class="post_tag button button_translucent" data-position=2 title=macosx>MACOSX<span class=button_tally>2</span>
</a><a href=https://kane.mx/tags/makefile/ class="post_tag button button_translucent" data-position=1 title=makefile>MAKEFILE<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/maven/ class="post_tag button button_translucent" data-position=1 title=maven>MAVEN<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/metaverse/ class="post_tag button button_translucent" data-position=1 title=metaverse>METAVERSE<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/microservice/ class="post_tag button button_translucent" data-position=1 title=microservice>MICROSERVICE<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/migration/ class="post_tag button button_translucent" data-position=1 title=migration>MIGRATION<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/mingw/ class="post_tag button button_translucent" data-position=1 title=mingw>MINGW<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/mongodb/ class="post_tag button button_translucent" data-position=1 title=mongodb>MONGODB<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/monitoring/ class="post_tag button button_translucent" data-position=1 title=monitoring>MONITORING<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/mountain-lion/ class="post_tag button button_translucent" data-position=1 title="mountain lion">MOUNTAIN LION<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/nat/ class="post_tag button button_translucent" data-position=1 title=nat>NAT<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/nativecode/ class="post_tag button button_translucent" data-position=1 title=nativecode>NATIVECODE<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/network/ class="post_tag button button_translucent" data-position=1 title=network>NETWORK<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/nft/ class="post_tag button button_translucent" data-position=1 title=nft>NFT<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/nginx/ class="post_tag button button_translucent" data-position=1 title=nginx>NGINX<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/npm/ class="post_tag button button_translucent" data-position=1 title=npm>NPM<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/oas/ class="post_tag button button_translucent" data-position=1 title=oas>OAS<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/oauth2/ class="post_tag button button_translucent" data-position=2 title=oauth2>OAUTH2<span class=button_tally>2</span>
</a><a href=https://kane.mx/tags/observability/ class="post_tag button button_translucent" data-position=1 title=observability>OBSERVABILITY<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/oh-my-zsh/ class="post_tag button button_translucent" data-position=1 title=oh-my-zsh>OH-MY-ZSH<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/openai-api/ class="post_tag button button_translucent" data-position=2 title="openai api">OPENAI API<span class=button_tally>2</span>
</a><a href=https://kane.mx/tags/openapi/ class="post_tag button button_translucent" data-position=1 title=openapi>OPENAPI<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/openid/ class="post_tag button button_translucent" data-position=1 title=openid>OPENID<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/openid-connect/ class="post_tag button button_translucent" data-position=1 title="openid connect">OPENID CONNECT<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/openswan/ class="post_tag button button_translucent" data-position=1 title=openswan>OPENSWAN<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/osgi/ class="post_tag button button_translucent" data-position=7 title=osgi>OSGI<span class=button_tally>7</span>
</a><a href=https://kane.mx/tags/oss/ class="post_tag button button_translucent" data-position=1 title=oss>OSS<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/ossfs/ class="post_tag button button_translucent" data-position=1 title=ossfs>OSSFS<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/p2/ class="post_tag button button_translucent" data-position=7 title=p2>P2<span class=button_tally>7</span>
</a><a href=https://kane.mx/tags/pay/ class="post_tag button button_translucent" data-position=1 title=pay>PAY<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/pde/ class="post_tag button button_translucent" data-position=2 title=pde>PDE<span class=button_tally>2</span>
</a><a href=https://kane.mx/tags/performance/ class="post_tag button button_translucent" data-position=1 title=performance>PERFORMANCE<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/performance-tuning/ class="post_tag button button_translucent" data-position=2 title=performance-tuning>PERFORMANCE-TUNING<span class=button_tally>2</span>
</a><a href=https://kane.mx/tags/php/ class="post_tag button button_translucent" data-position=1 title=php>PHP<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/productivity/ class="post_tag button button_translucent" data-position=1 title=productivity>PRODUCTIVITY<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/profile/ class="post_tag button button_translucent" data-position=2 title=profile>PROFILE<span class=button_tally>2</span>
</a><a href=https://kane.mx/tags/projen/ class="post_tag button button_translucent" data-position=1 title=projen>PROJEN<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/proton/ class="post_tag button button_translucent" data-position=1 title=proton>PROTON<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/python/ class="post_tag button button_translucent" data-position=1 title=python>PYTHON<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/qcon/ class="post_tag button button_translucent" data-position=1 title=qcon>QCON<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/rcp/ class="post_tag button button_translucent" data-position=3 title=rcp>RCP<span class=button_tally>3</span>
</a><a href=https://kane.mx/tags/reporting/ class="post_tag button button_translucent" data-position=1 title=reporting>REPORTING<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/resilience-engineering/ class="post_tag button button_translucent" data-position=1 title="resilience engineering">RESILIENCE ENGINEERING<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/s3/ class="post_tag button button_translucent" data-position=1 title=s3>S3<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/salzburg/ class="post_tag button button_translucent" data-position=3 title=salzburg>SALZBURG<span class=button_tally>3</span>
</a><a href=https://kane.mx/tags/seo/ class="post_tag button button_translucent" data-position=1 title=seo>SEO<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/serverless/ class="post_tag button button_translucent" data-position=9 title=serverless>SERVERLESS<span class=button_tally>9</span>
</a><a href=https://kane.mx/tags/serverless-computing/ class="post_tag button button_translucent" data-position=9 title="serverless computing">SERVERLESS COMPUTING<span class=button_tally>9</span>
</a><a href=https://kane.mx/tags/serverless-pattern/ class="post_tag button button_translucent" data-position=1 title="serverless pattern">SERVERLESS PATTERN<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/service-catalog/ class="post_tag button button_translucent" data-position=1 title="service catalog">SERVICE CATALOG<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/service-mesh/ class="post_tag button button_translucent" data-position=1 title="service mesh">SERVICE MESH<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/session-management/ class="post_tag button button_translucent" data-position=1 title=session-management>SESSION-MANAGEMENT<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/shell/ class="post_tag button button_translucent" data-position=2 title=shell>SHELL<span class=button_tally>2</span>
</a><a href=https://kane.mx/tags/single-page-app/ class="post_tag button button_translucent" data-position=1 title=single-page-app>SINGLE-PAGE-APP<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/site-to-site-vpn/ class="post_tag button button_translucent" data-position=1 title="site-to-site vpn">SITE-TO-SITE VPN<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/smtp/ class="post_tag button button_translucent" data-position=1 title=smtp>SMTP<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/solr/ class="post_tag button button_translucent" data-position=1 title=solr>SOLR<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/sonarqube/ class="post_tag button button_translucent" data-position=1 title=sonarqube>SONARQUBE<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/sonatype-nexus/ class="post_tag button button_translucent" data-position=2 title="sonatype nexus">SONATYPE NEXUS<span class=button_tally>2</span>
</a><a href=https://kane.mx/tags/spring/ class="post_tag button button_translucent" data-position=2 title=spring>SPRING<span class=button_tally>2</span>
</a><a href=https://kane.mx/tags/spring-cloud/ class="post_tag button button_translucent" data-position=1 title="spring cloud">SPRING CLOUD<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/spring-cloud-function/ class="post_tag button button_translucent" data-position=1 title="spring cloud function">SPRING CLOUD FUNCTION<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/spring-boot/ class="post_tag button button_translucent" data-position=1 title=spring-boot>SPRING-BOOT<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/spring-framework/ class="post_tag button button_translucent" data-position=1 title=spring-framework>SPRING-FRAMEWORK<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/spring-session/ class="post_tag button button_translucent" data-position=1 title=spring-session>SPRING-SESSION<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/ssh/ class="post_tag button button_translucent" data-position=3 title=ssh>SSH<span class=button_tally>3</span>
</a><a href=https://kane.mx/tags/ssp/ class="post_tag button button_translucent" data-position=1 title=ssp>SSP<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/system-design/ class="post_tag button button_translucent" data-position=2 title="system design">SYSTEM DESIGN<span class=button_tally>2</span>
</a><a href=https://kane.mx/tags/tip/ class="post_tag button button_translucent" data-position=17 title=tip>TIP<span class=button_tally>17</span>
</a><a href=https://kane.mx/tags/tips/ class="post_tag button button_translucent" data-position=2 title=tips>TIPS<span class=button_tally>2</span>
</a><a href=https://kane.mx/tags/tour/ class="post_tag button button_translucent" data-position=3 title=tour>TOUR<span class=button_tally>3</span>
</a><a href=https://kane.mx/tags/travel/ class="post_tag button button_translucent" data-position=3 title=travel>TRAVEL<span class=button_tally>3</span>
</a><a href=https://kane.mx/tags/trick/ class="post_tag button button_translucent" data-position=1 title=trick>TRICK<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/trobule-shooting/ class="post_tag button button_translucent" data-position=1 title=trobule-shooting>TROBULE-SHOOTING<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/trouble-shooting/ class="post_tag button button_translucent" data-position=1 title=trouble-shooting>TROUBLE-SHOOTING<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/troubleshoot/ class="post_tag button button_translucent" data-position=3 title=troubleshoot>TROUBLESHOOT<span class=button_tally>3</span>
</a><a href=https://kane.mx/tags/troubleshooting/ class="post_tag button button_translucent" data-position=1 title=troubleshooting>TROUBLESHOOTING<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/tycho/ class="post_tag button button_translucent" data-position=1 title=tycho>TYCHO<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/ubuntu/ class="post_tag button button_translucent" data-position=1 title=ubuntu>UBUNTU<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/ubuntu-1404/ class="post_tag button button_translucent" data-position=1 title=ubuntu-1404>UBUNTU-1404<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/update/ class="post_tag button button_translucent" data-position=1 title=update>UPDATE<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/url-handler-service/ class="post_tag button button_translucent" data-position=1 title="url handler service">URL HANDLER SERVICE<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/web-2.0/ class="post_tag button button_translucent" data-position=2 title=web-2.0>WEB-2.0<span class=button_tally>2</span>
</a><a href=https://kane.mx/tags/wechat/ class="post_tag button button_translucent" data-position=2 title=wechat>WECHAT<span class=button_tally>2</span>
</a><a href=https://kane.mx/tags/weixin/ class="post_tag button button_translucent" data-position=2 title=weixin>WEIXIN<span class=button_tally>2</span>
</a><a href=https://kane.mx/tags/workaround/ class="post_tag button button_translucent" data-position=1 title=workaround>WORKAROUND<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/zend-ce/ class="post_tag button button_translucent" data-position=1 title="zend ce">ZEND CE<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/zend-debugger/ class="post_tag button button_translucent" data-position=1 title="zend debugger">ZEND DEBUGGER<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/zsh/ class="post_tag button button_translucent" data-position=1 title=zsh>ZSH<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/%E4%BA%91%E8%AE%A1%E7%AE%97/ class="post_tag button button_translucent" data-position=16 title=云计算>云计算<span class=button_tally>16</span>
</a><a href=https://kane.mx/tags/%E4%BC%9A%E8%AE%AE/ class="post_tag button button_translucent" data-position=2 title=会议>会议<span class=button_tally>2</span>
</a><a href=https://kane.mx/tags/%E5%85%83%E5%AE%87%E5%AE%99/ class="post_tag button button_translucent" data-position=1 title=元宇宙>元宇宙<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/%E5%85%AC%E4%BC%97%E5%B9%B3%E5%8F%B0/ class="post_tag button button_translucent" data-position=1 title=公众平台>公众平台<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/%E5%87%BD%E6%95%B0%E8%AE%A1%E7%AE%97/ class="post_tag button button_translucent" data-position=3 title=函数计算>函数计算<span class=button_tally>3</span>
</a><a href=https://kane.mx/tags/%E5%B7%A5%E7%A8%8B%E6%95%88%E7%8E%87/ class="post_tag button button_translucent" data-position=1 title=工程效率>工程效率<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/%E5%BE%AE%E4%BF%A1/ class="post_tag button button_translucent" data-position=1 title=微信>微信<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/%E6%8A%80%E5%B7%A7/ class="post_tag button button_translucent" data-position=1 title=技巧>技巧<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E%E4%BC%98%E5%8C%96/ class="post_tag button button_translucent" data-position=1 title=搜索引擎优化>搜索引擎优化<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/%E6%94%AF%E4%BB%98/ class="post_tag button button_translucent" data-position=1 title=支付>支付<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/%E6%9E%B6%E6%9E%84/ class="post_tag button button_translucent" data-position=2 title=架构>架构<span class=button_tally>2</span>
</a><a href=https://kane.mx/tags/%E6%B3%A8%E5%86%8C%E8%A1%A8/ class="post_tag button button_translucent" data-position=1 title=注册表>注册表<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/%E6%B7%B7%E6%B2%8C%E5%B7%A5%E7%A8%8B/ class="post_tag button button_translucent" data-position=1 title=混沌工程>混沌工程<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/%E7%BD%91%E7%AB%99%E6%9E%B6%E6%9E%84/ class="post_tag button button_translucent" data-position=1 title=网站架构>网站架构<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/%E9%82%AE%E4%BB%B6%E8%BD%AC%E5%8F%91/ class="post_tag button button_translucent" data-position=1 title=邮件转发>邮件转发<span class=button_tally>1</span>
</a><a href=https://kane.mx/tags/%E9%92%89%E9%92%89/ class="post_tag button button_translucent" data-position=4 title=钉钉>钉钉<span class=button_tally>4</span>
</a><a href=https://kane.mx/tags/%E9%98%BF%E9%87%8C%E4%BA%91/ class="post_tag button button_translucent" data-position=7 title=阿里云>阿里云<span class=button_tally>7</span></a><div class=tags_sort><span title="sort alphabetically">[A~Z]</span><span title="sort by count">[0~9]</span></div><span class=tags_hide><svg class="icon"><use xlink:href="#closeme"/></svg></span></div></div></nav></div></section></aside></div></main><svg width="0" height="0" class="hidden"><symbol viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" id="facebook"><path d="M437 0H75C33.648.0.0 33.648.0 75v362c0 41.352 33.648 75 75 75h151V331h-60v-90h60v-61c0-49.629 40.371-90 90-90h91v90h-91v61h91l-15 90h-76v181h121c41.352.0 75-33.648 75-75V75c0-41.352-33.648-75-75-75zm0 0"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18.001 18.001" id="twitter"><path d="M15.891 4.013c.808-.496 1.343-1.173 1.605-2.034a8.68 8.68.0 01-2.351.861c-.703-.756-1.593-1.14-2.66-1.14-1.043.0-1.924.366-2.643 1.078A3.56 3.56.0 008.766 5.383c0 .309.039.585.117.819-3.076-.105-5.622-1.381-7.628-3.837-.34.601-.51 1.213-.51 1.846.0 1.301.549 2.332 1.645 3.089-.625-.053-1.176-.211-1.645-.47.0.929.273 1.705.82 2.388a3.623 3.623.0 002.115 1.291c-.312.08-.641.118-.979.118-.312.0-.533-.026-.664-.083.23.757.664 1.371 1.291 1.841a3.652 3.652.0 002.152.743C4.148 14.173 2.625 14.69.902 14.69c-.422.0-.721-.006-.902-.038 1.697 1.102 3.586 1.649 5.676 1.649 2.139.0 4.029-.542 5.674-1.626 1.645-1.078 2.859-2.408 3.639-3.974a10.77 10.77.0 001.172-4.892v-.468a7.788 7.788.0 001.84-1.921 8.142 8.142.0 01-2.11.593z"/></symbol><symbol aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="mail"><path d="M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V4e2c0 26.5-21.5 48-48 48H48c-26.5.0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5.0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="calendar"><path d="M452 40h-24V0h-40v40H124V0H84v40H60C26.916 40 0 66.916.0 1e2v352c0 33.084 26.916 60 60 60h392c33.084.0 60-26.916 60-60V1e2c0-33.084-26.916-60-60-60zm20 412c0 11.028-8.972 20-20 20H60c-11.028.0-20-8.972-20-20V188h432v264zm0-304H40v-48c0-11.028 8.972-20 20-20h24v40h40V80h264v40h40V80h24c11.028.0 20 8.972 20 20v48z"/><path d="M76 230h40v40H76zm80 0h40v40h-40zm80 0h40v40h-40zm80 0h40v40h-40zm80 0h40v40h-40zM76 310h40v40H76zm80 0h40v40h-40zm80 0h40v40h-40zm80 0h40v40h-40zM76 390h40v40H76zm80 0h40v40h-40zm80 0h40v40h-40zm80 0h40v40h-40zm80-80h40v40h-40z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="github"><path d="M255.968 5.329C114.624 5.329.0 120.401.0 262.353c0 113.536 73.344 209.856 175.104 243.872 12.8 2.368 17.472-5.568 17.472-12.384.0-6.112-.224-22.272-.352-43.712-71.2 15.52-86.24-34.464-86.24-34.464-11.616-29.696-28.416-37.6-28.416-37.6-23.264-15.936 1.728-15.616 1.728-15.616 25.696 1.824 39.2 26.496 39.2 26.496 22.848 39.264 59.936 27.936 74.528 21.344 2.304-16.608 8.928-27.936 16.256-34.368-56.832-6.496-116.608-28.544-116.608-127.008.0-28.064 9.984-51.008 26.368-68.992-2.656-6.496-11.424-32.64 2.496-68 0 0 21.504-6.912 70.4 26.336 20.416-5.696 42.304-8.544 64.096-8.64 21.728.128 43.648 2.944 64.096 8.672 48.864-33.248 70.336-26.336 70.336-26.336 13.952 35.392 5.184 61.504 2.56 68 16.416 17.984 26.304 40.928 26.304 68.992.0 98.72-59.84 120.448-116.864 126.816 9.184 7.936 17.376 23.616 17.376 47.584.0 34.368-.32 62.08-.32 70.496.0 6.88 4.608 14.88 17.6 12.352C438.72 472.145 512 375.857 512 262.353 512 120.401 397.376 5.329 255.968 5.329z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 212 212" id="gitlab"><path d="M12.3 74.7h54L43.3 3c-1-3.6-6.4-3.6-7.6.0L12.3 74.8z"/><path d="M12.3 74.7.5 111c-1 3.2.0 6.8 3 8.8l101.6 74-92.5-119z"/><path d="M105 193.7l-38.6-119h-54l92.7 119z"/><path d="M105 193.7l38.7-119H66.4l38.7 119z"/><path d="M105 193.7l38.7-119H198l-93 119z"/><path d="M198 74.7l11.6 36.2c1 3 0 6.6-3 8.6l-101.5 74 93-119z"/><path d="M198 74.7h-54.3L167 3c1.2-3.6 6.4-3.6 7.6.0L198 74.8z"/></symbol><symbol viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" id="rss"><circle cx="3.429" cy="20.571" r="3.429"/><path d="M11.429 24h4.57C15.999 15.179 8.821 8.001.0 8v4.572c6.302.001 11.429 5.126 11.429 11.428z"/><path d="M24 24C24 10.766 13.234.0.0.0v4.571c10.714.0 19.43 8.714 19.43 19.429z"/></symbol><symbol viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" id="linkedin"><path d="M437 0H75C33.648.0.0 33.648.0 75v362c0 41.352 33.648 75 75 75h362c41.352.0 75-33.648 75-75V75c0-41.352-33.648-75-75-75zM181 406h-60V196h60zm0-240h-60v-60h60zm210 240h-60V286c0-16.54-13.46-30-30-30s-30 13.46-30 30v120h-60V196h60v11.309C286.719 202.422 296.93 196 316 196c40.691.043 75 36.547 75 79.688zm0 0"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 612 612" id="to-top"><path d="M604.501 440.509 325.398 134.956c-5.331-5.357-12.423-7.627-19.386-7.27-6.989-.357-14.056 1.913-19.387 7.27L7.499 440.509c-9.999 10.024-9.999 26.298.0 36.323s26.223 10.024 36.222.0l262.293-287.164L568.28 476.832c9.999 10.024 26.222 10.024 36.221.0 9.999-10.023 9.999-26.298.0-36.323z"/></symbol><symbol viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" id="carly"><path d="M504.971 239.029 448 182.059V84c0-46.317-37.682-84-84-84h-44c-13.255.0-24 10.745-24 24s10.745 24 24 24h44c19.851.0 36 16.149 36 36v108c0 6.365 2.529 12.47 7.029 16.971L454.059 256l-47.029 47.029A24.002 24.002.0 004e2 320v108c0 19.851-16.149 36-36 36h-44c-13.255.0-24 10.745-24 24s10.745 24 24 24h44c46.318.0 84-37.683 84-84v-98.059l56.971-56.971c9.372-9.372 9.372-24.568.0-33.941zM112 192V84c0-19.851 16.149-36 36-36h44c13.255.0 24-10.745 24-24S205.255.0 192 0h-44c-46.318.0-84 37.683-84 84v98.059l-56.971 56.97c-9.373 9.373-9.373 24.568.0 33.941L64 329.941V428c0 46.317 37.682 84 84 84h44c13.255.0 24-10.745 24-24s-10.745-24-24-24h-44c-19.851.0-36-16.149-36-36V320c0-6.365-2.529-12.47-7.029-16.971L57.941 256l47.029-47.029A24.002 24.002.0 00112 192z"/></symbol><symbol viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" id="copy"><path d="M23 2.75A2.75 2.75.0 0020.25.0H8.75A2.75 2.75.0 006 2.75v13.5A2.75 2.75.0 008.75 19h11.5A2.75 2.75.0 0023 16.25zM18.25 14.5h-7.5a.75.75.0 010-1.5h7.5a.75.75.0 010 1.5zm0-3h-7.5a.75.75.0 010-1.5h7.5a.75.75.0 010 1.5zm0-3h-7.5a.75.75.0 010-1.5h7.5a.75.75.0 010 1.5z"/><path d="M8.75 20.5A4.255 4.255.0 014.5 16.25V2.75c0-.086.02-.166.025-.25H3.75A2.752 2.752.0 001 5.25v16A2.752 2.752.0 003.75 24h12a2.752 2.752.0 002.75-2.75v-.75z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512.001 512.001" id="closeme"><path d="M284.286 256.002 506.143 34.144c7.811-7.811 7.811-20.475.0-28.285-7.811-7.81-20.475-7.811-28.285.0L256 227.717 34.143 5.859c-7.811-7.811-20.475-7.811-28.285.0-7.81 7.811-7.811 20.475.0 28.285l221.857 221.857L5.858 477.859c-7.811 7.811-7.811 20.475.0 28.285a19.938 19.938.0 0014.143 5.857 19.94 19.94.0 0014.143-5.857L256 284.287l221.857 221.857c3.905 3.905 9.024 5.857 14.143 5.857s10.237-1.952 14.143-5.857c7.811-7.811 7.811-20.475.0-28.285L284.286 256.002z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="open-menu"><path d="M492 236H20c-11.046.0-20 8.954-20 20s8.954 20 20 20h472c11.046.0 20-8.954 20-20s-8.954-20-20-20zm0-160H20C8.954 76 0 84.954.0 96s8.954 20 20 20h472c11.046.0 20-8.954 20-20s-8.954-20-20-20zm0 320H20c-11.046.0-20 8.954-20 20s8.954 20 20 20h472c11.046.0 20-8.954 20-20s-8.954-20-20-20z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="instagram"><path d="M12 2.163c3.204.0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849.0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204.0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849.0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zM12 0C8.741.0 8.333.014 7.053.072c-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948s.014 3.668.072 4.948c.2 4.358 2.618 6.78 6.98 6.98C8.333 23.986 8.741 24 12 24s3.668-.014 4.948-.072c4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948s-.014-3.667-.072-4.947c-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403.0-6.162 2.759-6.162 6.162S8.597 18.163 12 18.163s6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zM12 16c-2.209.0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796.0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795.0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="youtube"><path d="M19.615 3.184c-3.604-.246-11.631-.245-15.23.0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23.0C23.512 20.55 23.971 18.196 24 12c-.029-6.185-.484-8.549-4.385-8.816zM9 16V8l8 3.993L9 16z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="stackoverflow"><path d="M21 27v-8h3v11H0V19h3v8h18z"/><path d="M17.1.2 15 1.8l7.9 10.6 2.1-1.6L17.1.2zm3.7 14.7L10.6 6.4l1.7-2 10.2 8.5-1.7 2zM7.2 12.3l12 5.6 1.1-2.4-12-5.6-1.1 2.4zm-1.8 6.8 13.56 1.96.17-2.38-13.26-2.55-.47 2.97zM19 25H5v-3h14v3z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="xing"><path d="M18.188.0c-.517.0-.741.325-.927.66.0.0-7.455 13.224-7.702 13.657.015.024 4.919 9.023 4.919 9.023.17.308.436.66.967.66h3.454c.211.0.375-.078.463-.22.089-.151.089-.346-.009-.536l-4.879-8.916c-.004-.006-.004-.016.0-.022L22.139.756c.095-.191.097-.387.006-.535C22.056.078 21.894.0 21.686.0h-3.498zM3.648 4.74c-.211.0-.385.074-.473.216-.09.149-.078.339.02.531l2.34 4.05c.004.01.004.016.0.021L1.86 16.051c-.099.188-.093.381.0.529.085.142.239.234.45.234h3.461c.518.0.766-.348.945-.667l3.734-6.609-2.378-4.155c-.172-.315-.434-.659-.962-.659H3.648v.016z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 71 55" id="discord"><path d="M60.1045 4.8978C55.5792 2.8214 50.7265 1.2916 45.6527.41542 45.5603.39851 45.468.440769 45.4204.525289 44.7963 1.6353 44.105 3.0834 43.6209 4.2216c-5.4572-.817-10.8864-.817-16.2317.0C26.905 3.0581 26.1886 1.6353 25.5617.525289 25.5141.443589 25.4218.40133 25.3294.41542c-5.071.87338-9.9237 2.40318-14.4518 4.48238C10.8384 4.9147 10.8048 4.9429 10.7825 4.9795 1.57795 18.7309-.943561 32.1443.293408 45.3914.299005 45.4562.335386 45.5182.385761 45.5576 6.45866 50.0174 12.3413 52.7249 18.1147 54.5195 18.2071 54.5477 18.305 54.5139 18.3638 54.4378 19.7295 52.5728 20.9469 50.6063 21.9907 48.5383 22.0523 48.4172 21.9935 48.2735 21.8676 48.2256 19.9366 47.4931 18.0979 46.6 16.3292 45.5858 16.1893 45.5041 16.1781 45.304 16.3068 45.2082 16.679 44.9293 17.0513 44.6391 17.4067 44.3461 17.471 44.2926 17.5606 44.2813 17.6362 44.3151c11.6196 5.3051 24.1992 5.3051 35.6817.0C53.3935 44.2785 53.4831 44.2898 53.5502 44.3433 53.9057 44.6363 54.2779 44.9293 54.6529 45.2082 54.7816 45.304 54.7732 45.5041 54.6333 45.5858c-1.7687 1.0339-3.6074 1.9073-5.5412 2.637C48.9662 48.2707 48.9102 48.4172 48.9718 48.5383c1.0662 2.0651 2.2836 4.0316 3.6241 5.8967C52.6519 54.5139 52.7526 54.5477 52.845 54.5195c5.8014-1.7946 11.684-4.5021 17.7569-8.9619C70.6551 45.5182 70.6887 45.459 70.6943 45.3942 72.1747 30.0791 68.2147 16.7757 60.1968 4.9823 60.1772 4.9429 60.1437 4.9147 60.1045 4.8978zM23.7259 37.3253c-3.4983.0-6.3808-3.2117-6.3808-7.156s2.8266-7.156 6.3808-7.156c3.5821.0 6.4367 3.2399 6.3807 7.156.0 3.9443-2.8266 7.156-6.3807 7.156zm23.5919.0c-3.4982.0-6.3807-3.2117-6.3807-7.156s2.8265-7.156 6.3807-7.156c3.5822.0 6.4367 3.2399 6.3808 7.156.0 3.9443-2.7986 7.156-6.3808 7.156z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17 18" id="mastodon"><path fill="#fff" d="m15.054695 9.8859583c-.22611 1.1632697-2.02517 2.4363497-4.09138 2.6830797-1.0774504.12856-2.1382704.24673-3.2694704.19484-1.84996-.0848-3.30971-.44157-3.30971-.44157.0.1801.0111.35157.0333.51194.24051 1.82571 1.81034 1.93508 3.29737 1.98607 1.50088.0514 2.8373104-.37004 2.8373104-.37004l.0617 1.35686s-1.0498104.56374-2.9199404.66742c-1.03124.0567-2.3117-.0259-3.80308-.42069-3.23454998-.85613-3.79081998-4.304-3.87592998-7.8024197-.026-1.03871-.01-2.01815-.01-2.83732.0-3.57732 2.34385998-4.62587996 2.34385998-4.62587996 1.18184-.54277 3.20976-.77101 5.318-.7882499985409h.0518C9.8267646.01719834 11.856025.24547834 13.037775.78824834c0 0 2.34377 1.04855996 2.34377 4.62587996.0.0.0294 2.63937-.32687 4.47183"/><path fill="#000" d="m12.616925 5.6916583v4.3315297h-1.71607V5.8189683c0-.88624-.37289-1.33607-1.1187604-1.33607-.82467.0-1.23799.53361-1.23799 1.58875v2.30122h-1.70594v-2.30122c0-1.05514-.4134-1.58875-1.23808-1.58875-.74587.0-1.11876.44983-1.11876 1.33607v4.2042197h-1.71607V5.6916583c0-.88527.22541-1.58876.67817-2.10922.46689-.52047 1.07833-.78727 1.83735-.78727.87816.0 1.54317.33752 1.98288 1.01267l.42744.71655.42753-.71655c.43961-.67515 1.10463-1.01267 1.9828704-1.01267.75893.0 1.37037.2668 1.83735.78727.45268.52046.67808 1.22395.67808 2.10922"/></symbol></svg><footer class=footer><div class="footer_inner wrap pale"><img src=https://kane.mx/img/portrait.jpg class="icon icon_2 transparent" alt="The road"><p>Copyright&nbsp;2006-&nbsp;<span class=year></span>&nbsp;THE ROAD. All Rights Reserved</p><a class=to_top href=#documentTop><svg class="icon"><title>to-top</title><use xlink:href="#to-top"/></svg></a></div></footer><script type=text/javascript src=https://kane.mx/en/js/bundle.a037b368e4d333b6a2762e5edc10fd6b814dbfd7242bb391652e4836e47b43129672364610e5c6a374be92375affb74d08162abe4b11424c1d01bf389d13f25e.js integrity="sha512-oDezaOTTM7aidi5e3BD9a4FNv9ckK7ORZS5INuR7QxKWcjZGEOXGo3S+kjda/7dNCBYqvksRQkwdAb84nRPyXg==" crossorigin=anonymous></script><script src=https://kane.mx/js/search.min.73cb82d8f274395dd220d6594053cd3d3d8ac8c97d874b5142a60b9744f3704d765551e0ade104d5803c66b731f5a7a00ac2cff33c8c9090ff8100169a3e2574.js></script></body></html>